<!doctype html><html lang=fr dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Utiliser plusieurs versions de PHP et switcher facilement d'une version à l'autre sous Ubuntu | ::franek::</title>
<meta name=keywords content="développement web,installation,Lamp,oracle,php,ubuntu,Zend Server"><meta name=description content="EDIT du 09/04/2010 : En fait, cette technique est obsolète. Je viens de découvrir PHPFarm qui semble faire plus ou moins ce que je souhaite faire. A tester donc.
--
Sur mon environnement de développement, je souhaite pouvoir switcher facilement d&rsquo;une version de PHP à l&rsquo;autre. Mes pré-requis sont de disposer de versions compilées de PHP (avec les extensions APC et Xdebug) ainsi que d&rsquo;une version de PHP packagée avec Zend Server."><meta name=author content="franek"><link rel=canonical href=https://franek.chicour.net/post/utiliser-plusieurs-versions-de-php-et-switcher-facilement-d-une-version-a-l-autre-sous-ubuntu/><meta name=google-site-verification content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://franek.chicour.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://franek.chicour.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://franek.chicour.net/favicon-32x32.png><link rel=apple-touch-icon href=https://franek.chicour.net/apple-touch-icon.png><link rel=mask-icon href=https://franek.chicour.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=fr href=https://franek.chicour.net/post/utiliser-plusieurs-versions-de-php-et-switcher-facilement-d-une-version-a-l-autre-sous-ubuntu/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://franek.chicour.net/post/utiliser-plusieurs-versions-de-php-et-switcher-facilement-d-une-version-a-l-autre-sous-ubuntu/"><meta property="og:site_name" content="::franek::"><meta property="og:title" content="Utiliser plusieurs versions de PHP et switcher facilement d'une version à l'autre sous Ubuntu"><meta property="og:description" content="EDIT du 09/04/2010 : En fait, cette technique est obsolète. Je viens de découvrir PHPFarm qui semble faire plus ou moins ce que je souhaite faire. A tester donc.
--
Sur mon environnement de développement, je souhaite pouvoir switcher facilement d’une version de PHP à l’autre. Mes pré-requis sont de disposer de versions compilées de PHP (avec les extensions APC et Xdebug) ainsi que d’une version de PHP packagée avec Zend Server."><meta property="og:locale" content="fr"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2010-03-30T18:32:00+02:00"><meta property="article:modified_time" content="2010-04-09T16:34:16+02:00"><meta property="article:tag" content="Développement Web"><meta property="article:tag" content="Installation"><meta property="article:tag" content="Lamp"><meta property="article:tag" content="Oracle"><meta property="article:tag" content="Php"><meta property="article:tag" content="Ubuntu"><meta name=twitter:card content="summary"><meta name=twitter:title content="Utiliser plusieurs versions de PHP et switcher facilement d'une version à l'autre sous Ubuntu"><meta name=twitter:description content="EDIT du 09/04/2010 : En fait, cette technique est obsolète. Je viens de découvrir PHPFarm qui semble faire plus ou moins ce que je souhaite faire. A tester donc.
--
Sur mon environnement de développement, je souhaite pouvoir switcher facilement d&rsquo;une version de PHP à l&rsquo;autre. Mes pré-requis sont de disposer de versions compilées de PHP (avec les extensions APC et Xdebug) ainsi que d&rsquo;une version de PHP packagée avec Zend Server."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://franek.chicour.net/post/"},{"@type":"ListItem","position":2,"name":"Utiliser plusieurs versions de PHP et switcher facilement d'une version à l'autre sous Ubuntu","item":"https://franek.chicour.net/post/utiliser-plusieurs-versions-de-php-et-switcher-facilement-d-une-version-a-l-autre-sous-ubuntu/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Utiliser plusieurs versions de PHP et switcher facilement d'une version à l'autre sous Ubuntu","name":"Utiliser plusieurs versions de PHP et switcher facilement d\u0027une version à l\u0027autre sous Ubuntu","description":"EDIT du 09/04/2010 : En fait, cette technique est obsolète. Je viens de découvrir PHPFarm qui semble faire plus ou moins ce que je souhaite faire. A tester donc.\n--\nSur mon environnement de développement, je souhaite pouvoir switcher facilement d\u0026rsquo;une version de PHP à l\u0026rsquo;autre. Mes pré-requis sont de disposer de versions compilées de PHP (avec les extensions APC et Xdebug) ainsi que d\u0026rsquo;une version de PHP packagée avec Zend Server.\n","keywords":["développement web","installation","Lamp","oracle","php","ubuntu","Zend Server"],"articleBody":"EDIT du 09/04/2010 : En fait, cette technique est obsolète. Je viens de découvrir PHPFarm qui semble faire plus ou moins ce que je souhaite faire. A tester donc.\n--\nSur mon environnement de développement, je souhaite pouvoir switcher facilement d’une version de PHP à l’autre. Mes pré-requis sont de disposer de versions compilées de PHP (avec les extensions APC et Xdebug) ainsi que d’une version de PHP packagée avec Zend Server.\nJe souhaite conserver la même version d’Apache. Sous windows, j’aurai avantageusement pu utiliser Wampserver, EasyPHP, … Sous Linux, à ma connaissance, il n’existe pas de mécanisme de ce type.\nJ’ai donc développé un petit script Bash qui permet d’installer rapidement l’ensemble des versions PHP nécessaires avec les mêmes options de compilation.\nJ’utilise une version de Ubuntu mais cela devrait fonctionner avec une autre distribution.\nA l’issue de l’installation, je pourrais switcher d’une version de PHP en une seule commande. Le PHP installé contiendra les mêmes extensions.\nLe script va installer les différentes versions de PHP en utilisant la ligne de compilation suivante (qui correspond à mes besoins - support Oracle, mysql, gettext - , il est bien entendu possible de l’adapter à votre besoin) :\n./configure --prefix=$installdir/$version \\ --with-config-file-path=$installdir/$version/etc \\ --with-apxs2=/usr/bin/apxs2 \\ --with-oci8=instantclient,/usr/local/oracle/instantclient \\ --enable-pdo \\ --with-pdo-oci=instantclient,/usr/local/oracle/instantclient,10.2.0.3 \\ --with-libxml-dir=/usr/lib/libxml2 \\ --with-xsl \\ --enable-ftp \\ --with-gettext \\ --enable-mbstring \\ --enable-soap \\ --enable-calendar \\ --with-openssl \\ --with-zlib \\ --with-mysql \\ --with-gd \\ --with-freetype-dir=/usr \\ --with-jpeg-dir=/usr \\ --enable-gd-native-ttf \\ --with-ttf \\ --with-t1lib \\ --enable-cli Préparation de l’environnement Installer Zend Server. Vous pouvez suivre la procédure habituelle. Installer les paquets manquants afin de pouvoir compiler PHP (si vous souhaitez d’autres modules PHP, vous devrez ajouter d’autres paquets) : sudo apt-get install apache2-prefork-dev libxml2-dev libxslt-dev openssl bison flex gcc automake libt1-dev libjpeg62-dev libfreetype6-dev freetype1-tools libgd-dev libmysqlclient15-dev Créer un fichier compil-php.sh contenant : #!/bin/bash # --------------------------------------------------------------- # Script d'installation de plusieurs versions PHP sous Ubuntu # Auteur : franek (franek at chicour dot net) # --------------------------------------------------------------- # répertoire où seront stockées les sources compilées de PHP compildir=/opt/compil-php # répertoire où seront installées les différentes versions de PHP installdir=/usr/local # Liste des versions de PHP à installer. Respecter la syntaxe php-X.Y.Z (sauf pour zend-ce) versioninstall=\"zend-ce php-5.2.5 php-5.2.13\"; # Nom du programme progname=$(basename $0) # Usage de ce script # --- function Usage() { echo \"\" echo \" Objet :\" echo \" Ce programme permet d'installer plusieurs version de PHP sur un même serveur et de switcher d'une version de PHP à l'autre\" echo \"\" echo \" Usage : \" echo \" $progname \" echo \" Les possibles sont : \" echo \" - list : liste les versions de php installées\" echo \" - install : installe toutes les versions PHP\" echo \" - switch : permet de switcher de version\" echo \" exemple : \" echo \" $progname list\" } # Création de l'environnement # --- function CreateEnv { echo \" - Création de l'environnement de compilation\" if [ ! -d $compildir ]; then echo \" - Création du répertoire $compildir\" sudo mkdir -p $compildir sudo chmod 777 $compildir fi } # Téléchargement des sources de PHP à installer # --- function Download { version=$1 echo \" - Téléchargement de $version\" cd $compildir # Pour la version 5.2.5, il faut la récupérer sur museum.php.net # @todo : gérer les versions inférieures à 5.2.5 if [ $version = \"php-5.2.5\" ]; then url=http://museum.php.net/php5/php-5.2.5.tar.gz else url=http://fr.php.net/get/$version.tar.gz/from/this/mirror fi wget $url } # Décompression des sources de PHP # --- function Unzip { version=$1 cd $compildir tar xvfz $version.tar.gz rm $version.tar.gz } # Compilation de PHP # --- function Compil { version=$1 phpcompildir=\"$compildir/$version\" echo $phpcompildir cd $phpcompildir export OPTIM=-02 make clean # compilation de PHP avec support Oracle, Gettext, ... # cette configuration peut être modifiée. ./configure --prefix=$installdir/$version \\ --with-config-file-path=$installdir/$version/etc \\ --with-apxs2=/usr/bin/apxs2 \\ --with-oci8=instantclient,/usr/local/oracle/instantclient \\ --enable-pdo \\ --with-pdo-oci=instantclient,/usr/local/oracle/instantclient,10.2.0.3 \\ --with-libxml-dir=/usr/lib/libxml2 \\ --with-xsl \\ --enable-ftp \\ --with-gettext \\ --enable-mbstring \\ --enable-soap \\ --enable-calendar \\ --with-openssl \\ --with-zlib \\ --with-mysql \\ --with-gd \\ --with-freetype-dir=/usr \\ --with-jpeg-dir=/usr \\ --enable-gd-native-ttf \\ --with-ttf \\ --with-t1lib \\ --enable-cli make -j 10 } # Affiche la liste des versions de PHP disponibles # --- function List { echo \"Versions disponibles : \" # pour chaque version, on installe for version in $versioninstall do echo \" - PHP version $version\"; done echo \"Si vous souhaitez ajouter des versions, vous devez simplement éditer la variable versioninstall\" } # Fonction qui permet de switcher de version de PHP # --- function Switch { i=1 echo \"Versions disponibles : \" for version in $versioninstall do tab[$i]=\"$version\" echo \" $i/ PHP version $version\"; i=$(($i + 1)) done echo \" - Quelle version de PHP souhaitez-vous utiliser ?\" read item echo \" - vous avez choisi d'utilsier : ${tab[$item]}\"; version=${tab[$item]} cd /usr/lib/apache2/modules if [ \"$version\" = \"zend-ce\" ]; then # PHP version Zend sudo rm libphp5.so \u0026\u0026 sudo ln -s ../../../local/zend/lib/php/libphp5.so libphp5.so else # PHP version compilé 5.2.5 sudo rm libphp5.so \u0026\u0026 sudo ln -s $compildir/$version/libs/libphp5.so fi sudo apache2ctl restart } # Procédure d'installation de PHP # --- function InstallPhp { while : do version=$1 echo \" - voulez-vous installer PHP (version : $version) ? (0/N)\" read OK case $OK in \"O\") sudo make install-cli sudo make install-pear sudo make install-programs sudo make install-programs sudo make install-build sudo make install-headers #installation de apc et xdebug cd \"$installdir/$version/bin\" sudo ./pear update-channels sudo ./pear upgrade-all sudo ./pecl install pecl/apc sudo ./pecl install pecl/xdebug #création du fichier php.ini par défaut sudo touch $installdir/$version/etc/php.ini sudo chmod 777 $installdir/$version/etc/php.ini sudo echo -e \"extension=apc.so\\nextension=xdebug.so\" \u003e $installdir/$version/etc/php.ini break;; \"N\") echo \"Cette version ne sera pas installée.\"; break;; *) echo \" /!\\ Veuillez répondre par O ou N !\";; esac done } # Fonction générale de lancement de l'installation de PHP function Install { # création de l'environnement CreateEnv # pour chaque version, on installe for version in $versioninstall do # on installe pas zend-ce if [ $version = \"zend-ce\" ]; then continue; fi Download $version Unzip $version Compil $version InstallPhp $version done; } # ------------------------------------------------------------------------------- # ---- début du script ---------------------------------------------------------- # ------------------------------------------------------------------------------- if [ ! $# -eq 1 ] then Usage exit 0; else action=$1 case $action in \"list\") List;; \"install\") Install;; \"switch\") Switch;; *) echo \" /!\\ Mauvaise utilisation\"; Usage; exit 1; ;; esac\tfi Editer le script avec les versions de PHP que vous souhaitez installer. La variable à modifier est versioninstall. Chaque version doit être séparée par un espace. Le nom de la version doit respecter la syntaxe php-X.Y.Z. Exécuter ce script. ./compil-php.sh\nPar défaut, ce script va vous afficher les commandes disponibles. Vous avez 3 options :\ninstall : va installer les versions de PHP dans /usr/local/php-X.Y.Z list : afficher la liste des versions de PHP configurées dans le script switch : lorsque les versions de PHP ont été installées, permet de switcher d’une version de PHP à l’autre. Par défaut, ce script va compiler les PHP dans le répertoire /opt/compil-php. Cette variable peut être modifiée dans le script.\nLes binaires seront installés dans /usr/local/php-X.Y.Z. Le fichier de configuration php.ini se trouvera dans /usr/local/php-X.Y.Z/etc/php.ini (il est donc possible d’avoir un fichier php.ini par installation de PHP).\nC’est un script brut. Des modifications pourraient être apportéees :\nmise en oeuvre des contrôles d’erreurs installation automatique de Zend Server installation de HipHop … ","wordCount":"1198","inLanguage":"fr","datePublished":"2010-03-30T18:32:00+02:00","dateModified":"2010-04-09T16:34:16+02:00","author":[{"@type":"Person","name":"franek"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://franek.chicour.net/post/utiliser-plusieurs-versions-de-php-et-switcher-facilement-d-une-version-a-l-autre-sous-ubuntu/"},"publisher":{"@type":"Organization","name":"::franek::","logo":{"@type":"ImageObject","url":"https://franek.chicour.net/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://franek.chicour.net/ accesskey=h title="::franek:: (Alt + H)"><img src=https://franek.chicour.net/public/logo-franek.png alt aria-label=logo height=35>::franek::</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://franek.chicour.net/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://franek.chicour.net/archive/ title=Archives><span>Archives</span></a></li><li><a href=https://franek.chicour.net/search/ title="Recherche (Alt + /)" accesskey=/><span>Recherche</span></a></li><li><a href=https://franek.chicour.net/feed/rss2 title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Utiliser plusieurs versions de PHP et switcher facilement d'une version à l'autre sous Ubuntu</h1><div class=post-meta><span title='2010-03-30 18:32:00 +0200 +0200'>mars 30, 2010</span>&nbsp;·&nbsp;franek</div></header><div class=post-content><p><strong>EDIT du 09/04/2010</strong> : En fait, cette technique est obsolète. Je viens de découvrir <a href=http://cweiske.de/tagebuch/Introducing%20phpfarm.htm>PHPFarm</a> qui semble faire plus ou moins ce que je souhaite faire. A tester donc.</p><p>--</p><p>Sur mon environnement de développement, je souhaite pouvoir switcher facilement d&rsquo;une version de PHP à l&rsquo;autre. Mes pré-requis sont de disposer de versions compilées de PHP (avec les extensions APC et Xdebug) ainsi que d&rsquo;une version de PHP packagée avec Zend Server.</p><p>Je souhaite conserver la même version d&rsquo;Apache. Sous windows, j&rsquo;aurai avantageusement pu utiliser <a href=http://www.wampserver.com/>Wampserver</a>, <a href=http://www.easyphp.org/>EasyPHP</a>, &mldr; Sous Linux, à ma connaissance, il n&rsquo;existe pas de mécanisme de ce type.</p><p>J&rsquo;ai donc développé un petit script Bash qui permet d&rsquo;installer rapidement l&rsquo;ensemble des versions PHP nécessaires avec les mêmes options de compilation.</p><p>J&rsquo;utilise une version de Ubuntu mais cela devrait fonctionner avec une autre distribution.</p><p>A l&rsquo;issue de l&rsquo;installation, je pourrais switcher d&rsquo;une version de PHP en une seule commande. Le PHP installé contiendra les mêmes extensions.</p><p>Le script va installer les différentes versions de PHP en utilisant la ligne de compilation suivante (qui correspond à mes besoins - support Oracle, mysql, gettext - , il est bien entendu possible de l&rsquo;adapter à votre besoin) :</p><pre tabindex=0><code>
./configure --prefix=$installdir/$version \
        --with-config-file-path=$installdir/$version/etc \
        --with-apxs2=/usr/bin/apxs2 \
        --with-oci8=instantclient,/usr/local/oracle/instantclient \
        --enable-pdo \
        --with-pdo-oci=instantclient,/usr/local/oracle/instantclient,10.2.0.3 \
        --with-libxml-dir=/usr/lib/libxml2 \
        --with-xsl \
        --enable-ftp \
        --with-gettext \
        --enable-mbstring \
        --enable-soap \
        --enable-calendar \
        --with-openssl \
        --with-zlib \
        --with-mysql \
        --with-gd \
        --with-freetype-dir=/usr \
        --with-jpeg-dir=/usr \
        --enable-gd-native-ttf \
        --with-ttf \
        --with-t1lib \
	--enable-cli
</code></pre><h2 id=préparation-de-lenvironnement>Préparation de l&rsquo;environnement<a hidden class=anchor aria-hidden=true href=#préparation-de-lenvironnement>#</a></h2><ol><li>Installer Zend Server. Vous pouvez suivre la <a href=http://www.zend.com/fr/products/server/downloads>procédure habituelle</a>.</li><li>Installer les paquets manquants afin de pouvoir compiler PHP (si vous souhaitez d&rsquo;autres modules PHP, vous devrez ajouter d&rsquo;autres paquets) :</li></ol><pre tabindex=0><code>
sudo apt-get install apache2-prefork-dev libxml2-dev libxslt-dev openssl bison flex gcc automake libt1-dev libjpeg62-dev libfreetype6-dev freetype1-tools libgd-dev libmysqlclient15-dev
</code></pre><ol><li>Créer un fichier compil-php.sh contenant :</li></ol><pre tabindex=0><code>
#!/bin/bash
# ---------------------------------------------------------------
# Script d&#39;installation de plusieurs versions PHP sous Ubuntu
# Auteur : franek (franek at chicour dot net)
# ---------------------------------------------------------------

# répertoire où seront stockées les sources compilées de PHP
compildir=/opt/compil-php

# répertoire où seront installées les différentes versions de PHP
installdir=/usr/local

# Liste des versions de PHP à installer. Respecter la syntaxe php-X.Y.Z (sauf pour zend-ce)
versioninstall=&#34;zend-ce php-5.2.5 php-5.2.13&#34;;

# Nom du programme
progname=$(basename $0)

# Usage de ce script
# ---
function Usage()
{
	echo &#34;&#34;
    echo &#34; Objet :&#34;
    echo &#34;   Ce programme permet d&#39;installer plusieurs version de PHP sur un même serveur et de switcher d&#39;une version de PHP à l&#39;autre&#34;
    echo &#34;&#34;
    echo &#34; Usage : &#34;
    echo &#34;   $progname &lt;action&gt;&#34;
	echo &#34; Les &lt;action&gt; possibles sont : &#34;
	echo &#34;   - list : liste les versions de php installées&#34;
	echo &#34;   - install : installe toutes les versions PHP&#34;
	echo &#34;   - switch : permet de switcher de version&#34;
    echo &#34;   exemple : &#34;
    echo &#34;   $progname list&#34;
}

# Création de l&#39;environnement
# ---
function CreateEnv
{
	echo &#34; - Création de l&#39;environnement de compilation&#34;
	if [ ! -d $compildir ]; then
		echo &#34; - Création du répertoire $compildir&#34;
		sudo mkdir -p $compildir
		sudo chmod 777 $compildir
	fi
}

# Téléchargement des sources de PHP à installer
# ---
function Download
{
	version=$1
	echo &#34; - Téléchargement de $version&#34;
	cd $compildir
	# Pour la version 5.2.5, il faut la récupérer sur museum.php.net
	# @todo : gérer les versions inférieures à 5.2.5
	if [ $version = &#34;php-5.2.5&#34; ]; then
		url=http://museum.php.net/php5/php-5.2.5.tar.gz
	else
		url=http://fr.php.net/get/$version.tar.gz/from/this/mirror
	fi
	wget $url
}

# Décompression des sources de PHP
# ---
function Unzip
{
	version=$1
	cd $compildir
	tar xvfz $version.tar.gz
	rm $version.tar.gz
}

# Compilation de PHP
# ---
function Compil
{
	version=$1
	phpcompildir=&#34;$compildir/$version&#34;
	echo $phpcompildir
	cd $phpcompildir
	
	export OPTIM=-02
	make clean

	# compilation de PHP avec support Oracle, Gettext, ...
	# cette configuration peut être modifiée.
	./configure --prefix=$installdir/$version \
        --with-config-file-path=$installdir/$version/etc \
        --with-apxs2=/usr/bin/apxs2 \
        --with-oci8=instantclient,/usr/local/oracle/instantclient \
        --enable-pdo \
        --with-pdo-oci=instantclient,/usr/local/oracle/instantclient,10.2.0.3 \
        --with-libxml-dir=/usr/lib/libxml2 \
        --with-xsl \
        --enable-ftp \
        --with-gettext \
        --enable-mbstring \
        --enable-soap \
        --enable-calendar \
        --with-openssl \
        --with-zlib \
        --with-mysql \
        --with-gd \
        --with-freetype-dir=/usr \
        --with-jpeg-dir=/usr \
        --enable-gd-native-ttf \
        --with-ttf \
        --with-t1lib \
		--enable-cli
	
	make -j 10
}

# Affiche la liste des versions de PHP disponibles
# ---
function List
{
	echo &#34;Versions disponibles : &#34;
	# pour chaque version, on installe
	for version in $versioninstall
	do
		echo &#34; - PHP version $version&#34;;
	done
	echo &#34;Si vous souhaitez ajouter des versions, vous devez simplement éditer la variable versioninstall&#34;
}

# Fonction qui permet de switcher de version de PHP
# ---
function Switch
{
	i=1
	echo &#34;Versions disponibles : &#34;
	for version in $versioninstall
	do
		tab[$i]=&#34;$version&#34;
		echo &#34; $i/ PHP version $version&#34;;
		i=$(($i + 1))
	done
	echo &#34; - Quelle version de PHP souhaitez-vous utiliser ?&#34;
	read item
	echo &#34; - vous avez choisi d&#39;utilsier : ${tab[$item]}&#34;;
	
	version=${tab[$item]}
	cd /usr/lib/apache2/modules
	if [ &#34;$version&#34; = &#34;zend-ce&#34; ]; then
		# PHP version Zend
		sudo rm libphp5.so &amp;&amp; sudo ln -s ../../../local/zend/lib/php/libphp5.so libphp5.so
	else
		# PHP version compilé 5.2.5
		sudo rm libphp5.so &amp;&amp; sudo ln -s $compildir/$version/libs/libphp5.so
	fi
	sudo apache2ctl restart
}

# Procédure d&#39;installation de PHP
# ---
function InstallPhp
{
	while :
	do
		version=$1
		echo &#34; - voulez-vous installer PHP (version : $version) ? (0/N)&#34;
		read OK
		case $OK in
			&#34;O&#34;) 	sudo make install-cli
					sudo make install-pear
					sudo make install-programs
					sudo make install-programs
					sudo make install-build
					sudo make install-headers
					#installation de apc et xdebug
					cd &#34;$installdir/$version/bin&#34;
					sudo ./pear update-channels
					sudo ./pear upgrade-all
					sudo ./pecl install pecl/apc
					sudo ./pecl install pecl/xdebug
					#création du fichier php.ini par défaut
					sudo touch $installdir/$version/etc/php.ini
					sudo chmod 777 $installdir/$version/etc/php.ini
					sudo echo -e &#34;extension=apc.so\nextension=xdebug.so&#34; &gt; $installdir/$version/etc/php.ini
					break;;
			&#34;N&#34;) echo &#34;Cette version ne sera pas installée.&#34;; break;;
			*) echo &#34; /!\ Veuillez répondre par O ou N !&#34;;;
		esac
	done
}

# Fonction générale de lancement de l&#39;installation de PHP
function Install
{
	# création de l&#39;environnement
	CreateEnv

	# pour chaque version, on installe
	for version in $versioninstall
	do
		# on installe pas zend-ce
		if [ $version = &#34;zend-ce&#34; ]; then
			continue;
		fi
		Download $version
		Unzip $version
		Compil $version
		InstallPhp $version
	done;
}

# -------------------------------------------------------------------------------
# ---- début du script ----------------------------------------------------------
# -------------------------------------------------------------------------------

if [ ! $# -eq 1 ]
then
        Usage
        exit 0;
else
	action=$1
	case $action in
        &#34;list&#34;) List;;
        &#34;install&#34;) Install;;
		&#34;switch&#34;) Switch;;
        *) echo &#34; /!\ Mauvaise utilisation&#34;; Usage; exit 1; ;;
    esac	
fi
</code></pre><ol><li>Editer le script avec les versions de PHP que vous souhaitez installer. La variable à modifier est versioninstall. Chaque version doit être séparée par un espace. Le nom de la version doit respecter la syntaxe php-X.Y.Z.</li><li>Exécuter ce script.</li></ol><p>./compil-php.sh</p><p>Par défaut, ce script va vous afficher les commandes disponibles. Vous avez 3 options :</p><ul><li>install : va installer les versions de PHP dans /usr/local/php-X.Y.Z</li><li>list : afficher la liste des versions de PHP configurées dans le script</li><li>switch : lorsque les versions de PHP ont été installées, permet de switcher d&rsquo;une version de PHP à l&rsquo;autre.</li></ul><p>Par défaut, ce script va compiler les PHP dans le répertoire /opt/compil-php. Cette variable peut être modifiée dans le script.</p><p>Les binaires seront installés dans /usr/local/php-X.Y.Z. Le fichier de configuration php.ini se trouvera dans /usr/local/php-X.Y.Z/etc/php.ini (il est donc possible d&rsquo;avoir un fichier php.ini par installation de PHP).</p><p>C&rsquo;est un script brut. Des modifications pourraient être apportéees :</p><ul><li>mise en oeuvre des contrôles d&rsquo;erreurs</li><li>installation automatique de Zend Server</li><li>installation de HipHop</li><li>&mldr;</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://franek.chicour.net/tags/d%C3%A9veloppement-web/>Développement Web</a></li><li><a href=https://franek.chicour.net/tags/installation/>Installation</a></li><li><a href=https://franek.chicour.net/tags/lamp/>Lamp</a></li><li><a href=https://franek.chicour.net/tags/oracle/>Oracle</a></li><li><a href=https://franek.chicour.net/tags/php/>Php</a></li><li><a href=https://franek.chicour.net/tags/ubuntu/>Ubuntu</a></li><li><a href=https://franek.chicour.net/tags/zend-server/>Zend Server</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://franek.chicour.net/>::franek::</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>