<!doctype html><html lang=fr dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Migration de ce blog | ::franek::</title><meta name=keywords content="dotclear,blog,hugo,markdown"><meta name=description content="Ce blog a longtemps √©t√© propuls√© par le moteur de blog Dotclear, un moteur de blog √©crit en PHP d√©velopp√© par des fran√ßais (Olivier Meunier au d√©part, Franck Paul d√©sormais). Il est d√©sormais propuls√© par Hugo.
J&rsquo;ai beaucoup utilis√© Dotclear, je l&rsquo;ai beaucoup aim√©. A l&rsquo;√©poque l&rsquo;organisation du code PHP de Dotclear √©tait bien meilleure que celle de Wordpress (j&rsquo;avoue n&rsquo;avoir pas regard√© le code de Wordpress aujourd&rsquo;hui). Un effort particulier √©tait fait sur l&rsquo;accessibilit√©."><meta name=author content="Franek"><link rel=canonical href=https://franek.chicour.net/post/migration-de-ce-blog/><meta name=google-site-verification content="XYZabc"><link href=https://franek.chicour.net/assets/css/stylesheet.min.b6e4fb9d9486ee9750cbbe1b4e388ff4332a2d1e0d17ab3592ecb6c6f7ba1157.css integrity="sha256-tuT7nZSG7pdQy74bTjiP9DMqLR4NF6s1kuy2xve6EVc=" rel="preload stylesheet" as=style><link rel=icon href=https://franek.chicour.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://franek.chicour.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://franek.chicour.net/favicon-32x32.png><link rel=apple-touch-icon href=https://franek.chicour.net/apple-touch-icon.png><link rel=mask-icon href=https://franek.chicour.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.79.1"><meta property="og:title" content="Migration de ce blog"><meta property="og:description" content="Ce blog a longtemps √©t√© propuls√© par le moteur de blog Dotclear, un moteur de blog √©crit en PHP d√©velopp√© par des fran√ßais (Olivier Meunier au d√©part, Franck Paul d√©sormais). Il est d√©sormais propuls√© par Hugo.
J&rsquo;ai beaucoup utilis√© Dotclear, je l&rsquo;ai beaucoup aim√©. A l&rsquo;√©poque l&rsquo;organisation du code PHP de Dotclear √©tait bien meilleure que celle de Wordpress (j&rsquo;avoue n&rsquo;avoir pas regard√© le code de Wordpress aujourd&rsquo;hui). Un effort particulier √©tait fait sur l&rsquo;accessibilit√©."><meta property="og:type" content="article"><meta property="og:url" content="https://franek.chicour.net/post/migration-de-ce-blog/"><meta property="og:image" content="https://franek.chicour.net/public/migration-blog-the-nigmatic-68RMbT06_ro-unsplash.jpg"><meta property="article:published_time" content="2021-01-02T21:34:13+01:00"><meta property="article:modified_time" content="2021-01-02T21:34:13+01:00"><meta property="og:site_name" content="::franek::"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://franek.chicour.net/public/migration-blog-the-nigmatic-68RMbT06_ro-unsplash.jpg"><meta name=twitter:title content="Migration de ce blog"><meta name=twitter:description content="Ce blog a longtemps √©t√© propuls√© par le moteur de blog Dotclear, un moteur de blog √©crit en PHP d√©velopp√© par des fran√ßais (Olivier Meunier au d√©part, Franck Paul d√©sormais). Il est d√©sormais propuls√© par Hugo.
J&rsquo;ai beaucoup utilis√© Dotclear, je l&rsquo;ai beaucoup aim√©. A l&rsquo;√©poque l&rsquo;organisation du code PHP de Dotclear √©tait bien meilleure que celle de Wordpress (j&rsquo;avoue n&rsquo;avoir pas regard√© le code de Wordpress aujourd&rsquo;hui). Un effort particulier √©tait fait sur l&rsquo;accessibilit√©."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Migration de ce blog","name":"Migration de ce blog","description":"Ce blog a longtemps √©t√© propuls√© par le moteur de blog Dotclear, un moteur de blog √©crit en PHP d√©velopp√© par des fran√ßais (Olivier Meunier au d√©part, Franck Paul d√©sormais). Il ‚Ä¶","keywords":["dotclear","blog","hugo","markdown"],"articleBody":"Ce blog a longtemps √©t√© propuls√© par le moteur de blog Dotclear, un moteur de blog √©crit en PHP d√©velopp√© par des fran√ßais (Olivier Meunier au d√©part, Franck Paul d√©sormais). Il est d√©sormais propuls√© par Hugo.\nJ‚Äôai beaucoup utilis√© Dotclear, je l‚Äôai beaucoup aim√©. A l‚Äô√©poque l‚Äôorganisation du code PHP de Dotclear √©tait bien meilleure que celle de Wordpress (j‚Äôavoue n‚Äôavoir pas regard√© le code de Wordpress aujourd‚Äôhui). Un effort particulier √©tait fait sur l‚Äôaccessibilit√©. Plusieurs audits accessibilit√©s avaient √©t√© r√©alis√©s sur le back-office et sur les principaux th√®mes.\nLa communaut√© (proche de celle de Paris-Web) semblait chouette.\nLe projet ‚ÄúDotclear‚Äù est toujours maintenu. Des mises √† jour continuent d‚Äôarriver (Merci Franck) mais personnellement, je souhaitais passer √† autre chose.\nDans un esprit ‚Äúlow-tech‚Äù, je ne souhaitais plus d√©pendre d‚Äôun serveur PHP ou d‚Äôune base de donn√©es pour h√©berger un contenu qui ne bouge quasiment pas.\nLes contenus de ce site sont d√©sormais √©crits dans des fichiers textes au format Markdown. Je dois lancer une moulinette (hugo --minify) pour g√©n√©rer ce site et quelques autres commandes git pour le publier.\nLes pages g√©n√©r√©es sont h√©berg√©es sur Github via les Github Pages mais je pourrais tr√®s bien faire de l‚Äôauto-h√©bergement et l‚Äôh√©berger sur un minuscule serveur vu le peu de visiteurs et le peu de ressources n√©cessaires pour juste servir une page HTML et ses m√©dias. Cela fera l‚Äôobjet d‚Äôune future mission‚Ä¶\nEn passant √† Hugo, je perds quelques fonctionnalit√©s comme les commentaires. Si vous avez √† me contacter, vous pouvez toujours utiliser le mail franek [√†] chicour [point] net.\nPour ceux qui souhaiteraient migrer de Dotclear √† Hugo, voici les quelques √©tapes que j‚Äôai r√©alis√©es.\nIl est √† noter que Dotclear dispose de sa propre syntaxe ‚Äúwiki2xhtml‚Äù pour √©crire ses billets. Depuis plusieurs versions, il est possible d‚Äô√©crire au format Markdown mais j‚Äôai un historique d‚Äôarticles qui √©taient encore √©crits dans ce format.\nIl y a quelques ann√©es, je m‚Äô√©tais lanc√© dans l‚Äô√©criture d‚Äôun plugin de conversion de ‚Äúwiki2xhtml‚Äù vers Markdown mais je ne l‚Äôai jamais termin√© (ni vraiment commenc√© d‚Äôailleurs).\nPour effectuer la migration, je suis donc parti du contenu HTML expos√© dans le flux RSS pour g√©n√©rer l‚Äôensemble des articles. Il existe plusieurs scripts Python qui font √ßa mais tous ceux que j‚Äôai test√©s avaient de petits probl√®mes (non support de certaines balises, ‚Ä¶) et je me retrouvais avec une perte d‚Äôinformations dans certains billets. J‚Äôai donc √©crit rapidement mon propre script de migration. Il n‚Äôest clairement pas parfait mais il a fonctionn√© pour moi.\nEn tr√®s rapide, les √©tapes que j‚Äôai r√©alis√©es pour la migration sont :\n Configurer Dotclear afin que l‚Äôensemble des articles soient expos√©s dans le flux ATOM  Les options importantes sont :\n ‚ÄúAfficher 200 billets par flux de syndication‚Äù (si vous avez plus de billets, vous devez augmenter cette valeur). D√©cocher ‚ÄúTronquer les flux de syndication‚Äù  Installer le script de migration  $ git clone git@github.com:franek/dotclear2hugo.git $ cd dotclear2hugo $ composer install Ex√©cuter le script afin d‚Äôexporter le contenu au format Markdown  php bin/console dotclear2hugo -f https://blog.domain.com/feed/atom  Installer gohugo et d√©placer le r√©pertoire content/post dans le r√©pertoire content de l‚Äôinstallation de gohugo\n  R√©cup√©rer l‚Äôensemble des m√©dias de Dotclear et les copier dans le r√©pertoire static de l‚Äôinstallation de gohugo.\n  Configurer Hugo et le d√©ployer.\n  La peinture est fra√Æche, il reste encore des petites choses √† faire mais le gros de la migration est fait.\nVous aurez peut-√™tre la chance d‚Äôavoir d‚Äôautres billets de blog cette ann√©e üëã.\n","wordCount":"572","inLanguage":"fr","image":"https://franek.chicour.net/public/migration-blog-the-nigmatic-68RMbT06_ro-unsplash.jpg","datePublished":"2021-01-02T21:34:13+01:00","dateModified":"2021-01-02T21:34:13+01:00","author":{"@type":"Person","name":"Franek"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://franek.chicour.net/post/migration-de-ce-blog/"},"publisher":{"@type":"Organization","name":"::franek::","logo":{"@type":"ImageObject","url":"https://franek.chicour.net/favicon.ico"}}}</script></head><body id=top><noscript><style type=text/css>.theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://franek.chicour.net accesskey=h title="::franek:: (Alt + H)"><img src=/public/logo-franek.png alt=logo aria-label=logo height=35>::franek::</a>
<span class=logo-switches></span></div><ul class=menu id=menu onscroll=menu_on_scroll()><li><a href=https://franek.chicour.net/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://franek.chicour.net/archive/ title=Archives><span>Archives</span></a></li><li><a href=https://franek.chicour.net/search/ title="Recherche (Alt + /)" accesskey=/><span>Recherche</span></a></li><li><a href=https://franek.chicour.net/feed/rss2 title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Migration de ce blog</h1><div class=post-meta>January 2, 2021&nbsp;¬∑&nbsp;Franek</div></header><figure class=entry-cover><img src=https://franek.chicour.net/public/migration-blog-the-nigmatic-68RMbT06_ro-unsplash.jpg alt="Migration d'oiseaux"><p>source: <a href=https://unsplash.com/photos/68RMbT06_ro>https://unsplash.com/photos/68RMbT06_ro</a></p></figure><div class=post-content><p>Ce blog a longtemps √©t√© propuls√© par le moteur de blog <a href=http://www.dotclear.org>Dotclear</a>, un moteur de blog √©crit en PHP d√©velopp√© par des fran√ßais (Olivier Meunier au d√©part, <a href=https://open-time.net/>Franck Paul</a> d√©sormais). Il est d√©sormais propuls√© par <a href=https://gohugo.io/>Hugo</a>.</p><p>J&rsquo;ai beaucoup utilis√© Dotclear, je l&rsquo;ai beaucoup aim√©.
A l&rsquo;√©poque l&rsquo;organisation du code PHP de Dotclear √©tait bien meilleure que celle de Wordpress (j&rsquo;avoue n&rsquo;avoir pas regard√© le code de Wordpress aujourd&rsquo;hui). Un effort particulier √©tait fait sur l&rsquo;accessibilit√©.
Plusieurs audits accessibilit√©s avaient √©t√© r√©alis√©s sur le back-office et sur les principaux th√®mes.</p><p>La communaut√© (proche de celle de Paris-Web) semblait chouette.</p><p>Le projet &ldquo;Dotclear&rdquo; est toujours maintenu. Des mises √† jour continuent d&rsquo;arriver (Merci Franck) mais personnellement, je souhaitais passer √† autre chose.</p><p>Dans un esprit &ldquo;low-tech&rdquo;, je ne souhaitais plus d√©pendre d&rsquo;un serveur PHP ou d&rsquo;une base de donn√©es pour h√©berger un contenu qui ne bouge quasiment pas.</p><p>Les contenus de ce site sont d√©sormais √©crits dans des fichiers textes au format Markdown. Je dois lancer une moulinette (<code>hugo --minify</code>) pour g√©n√©rer ce site et quelques autres commandes git pour le publier.</p><p>Les pages g√©n√©r√©es sont h√©berg√©es sur Github via les <a href=https://pages.github.com/>Github Pages</a> mais je pourrais tr√®s bien faire de l&rsquo;auto-h√©bergement et l&rsquo;h√©berger sur un minuscule serveur vu le peu de visiteurs et le peu de ressources n√©cessaires pour juste servir une page HTML et ses m√©dias. Cela fera l&rsquo;objet d&rsquo;une future mission&mldr;</p><p>En passant √† Hugo, je perds quelques fonctionnalit√©s comme les commentaires. Si vous avez √† me contacter, vous pouvez toujours utiliser le mail franek [√†] chicour [point] net.</p><p>Pour ceux qui souhaiteraient migrer de Dotclear √† Hugo, voici les quelques √©tapes que j&rsquo;ai r√©alis√©es.</p><p>Il est √† noter que Dotclear dispose de sa propre syntaxe &ldquo;wiki2xhtml&rdquo; pour √©crire ses billets. Depuis plusieurs versions, il est possible d&rsquo;√©crire au format Markdown mais j&rsquo;ai un historique d&rsquo;articles qui √©taient encore √©crits dans ce format.</p><p>Il y a quelques ann√©es, je m&rsquo;√©tais lanc√© dans l&rsquo;√©criture d&rsquo;un plugin de conversion de &ldquo;wiki2xhtml&rdquo; vers Markdown mais je ne l&rsquo;ai jamais termin√© (ni vraiment commenc√© d&rsquo;ailleurs).</p><p>Pour effectuer la migration, je suis donc parti du contenu HTML expos√© dans le flux RSS pour g√©n√©rer l&rsquo;ensemble des articles.
Il existe plusieurs scripts Python qui font √ßa mais tous ceux que j&rsquo;ai test√©s avaient de petits probl√®mes (non support de certaines balises, &mldr;) et je me retrouvais avec une perte d&rsquo;informations dans certains billets. J&rsquo;ai donc √©crit rapidement mon propre <a href=https://github.com/franek/dotclear2hugo>script de migration</a>. Il n&rsquo;est clairement pas parfait mais il a fonctionn√© pour moi.</p><p>En tr√®s rapide, les √©tapes que j&rsquo;ai r√©alis√©es pour la migration sont :</p><ol><li>Configurer Dotclear afin que l&rsquo;ensemble des articles soient expos√©s dans le flux ATOM</li></ol><p><img src=/public/migration-blog-conf-dotclear.png alt="Configuration dotclear"></p><p>Les options importantes sont :</p><ul><li>&ldquo;Afficher 200 billets par flux de syndication&rdquo; (si vous avez plus de billets, vous devez augmenter cette valeur).</li><li>D√©cocher &ldquo;Tronquer les flux de syndication&rdquo;</li></ul><ol start=2><li>Installer le script de migration</li></ol><pre><code>$ git clone git@github.com:franek/dotclear2hugo.git
$ cd dotclear2hugo
$ composer install
</code></pre><ol start=3><li>Ex√©cuter le script afin d&rsquo;exporter le contenu au format Markdown</li></ol><pre><code>php bin/console dotclear2hugo -f https://blog.domain.com/feed/atom
</code></pre><ol start=4><li><p>Installer <code>gohugo</code> et d√©placer le r√©pertoire <code>content/post</code> dans le r√©pertoire <code>content</code> de l&rsquo;installation de gohugo</p></li><li><p>R√©cup√©rer l&rsquo;ensemble des m√©dias de Dotclear et les copier dans le r√©pertoire <code>static</code> de l&rsquo;installation de gohugo.</p></li><li><p>Configurer Hugo et le d√©ployer.</p></li></ol><p>La peinture est fra√Æche, il reste encore des petites choses √† faire mais le gros de la migration est fait.</p><p>Vous aurez peut-√™tre la chance d&rsquo;avoir d&rsquo;autres billets de blog cette ann√©e üëã.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://franek.chicour.net/tags/dotclear/>dotclear</a></li><li><a href=https://franek.chicour.net/tags/blog/>blog</a></li><li><a href=https://franek.chicour.net/tags/hugo/>hugo</a></li><li><a href=https://franek.chicour.net/tags/markdown/>markdown</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://franek.chicour.net>::franek::</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=https://franek.chicour.net/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});if(id==="top"){history.replaceState(null,null," ");}else{history.replaceState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script></body></html>