<!doctype html><html lang=fr dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Migration de ce blog | ::franek::</title><meta name=keywords content="dotclear,blog,hugo,markdown"><meta name=description content="Ce blog a longtemps été propulsé par le moteur de blog Dotclear, un moteur de blog écrit en PHP développé par des français (Olivier Meunier au départ, Franck Paul désormais). Il est désormais propulsé par Hugo.
J&rsquo;ai beaucoup utilisé Dotclear, je l&rsquo;ai beaucoup aimé. A l&rsquo;époque l&rsquo;organisation du code PHP de Dotclear était bien meilleure que celle de Wordpress (j&rsquo;avoue n&rsquo;avoir pas regardé le code de Wordpress aujourd&rsquo;hui). Un effort particulier était fait sur l&rsquo;accessibilité."><meta name=author content="Franek"><link rel=canonical href=https://franek.chicour.net/post/migration-de-ce-blog/><meta name=google-site-verification content="XYZabc"><link href=https://franek.chicour.net/assets/css/stylesheet.min.b6e4fb9d9486ee9750cbbe1b4e388ff4332a2d1e0d17ab3592ecb6c6f7ba1157.css integrity="sha256-tuT7nZSG7pdQy74bTjiP9DMqLR4NF6s1kuy2xve6EVc=" rel="preload stylesheet" as=style><link rel=icon href=https://franek.chicour.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://franek.chicour.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://franek.chicour.net/favicon-32x32.png><link rel=apple-touch-icon href=https://franek.chicour.net/apple-touch-icon.png><link rel=mask-icon href=https://franek.chicour.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.79.1"><meta property="og:title" content="Migration de ce blog"><meta property="og:description" content="Ce blog a longtemps été propulsé par le moteur de blog Dotclear, un moteur de blog écrit en PHP développé par des français (Olivier Meunier au départ, Franck Paul désormais). Il est désormais propulsé par Hugo.
J&rsquo;ai beaucoup utilisé Dotclear, je l&rsquo;ai beaucoup aimé. A l&rsquo;époque l&rsquo;organisation du code PHP de Dotclear était bien meilleure que celle de Wordpress (j&rsquo;avoue n&rsquo;avoir pas regardé le code de Wordpress aujourd&rsquo;hui). Un effort particulier était fait sur l&rsquo;accessibilité."><meta property="og:type" content="article"><meta property="og:url" content="https://franek.chicour.net/post/migration-de-ce-blog/"><meta property="og:image" content="https://franek.chicour.net/public/migration-blog-the-nigmatic-68RMbT06_ro-unsplash.jpg"><meta property="article:published_time" content="2021-01-02T21:34:13+01:00"><meta property="article:modified_time" content="2021-01-02T21:34:13+01:00"><meta property="og:site_name" content="::franek::"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://franek.chicour.net/public/migration-blog-the-nigmatic-68RMbT06_ro-unsplash.jpg"><meta name=twitter:title content="Migration de ce blog"><meta name=twitter:description content="Ce blog a longtemps été propulsé par le moteur de blog Dotclear, un moteur de blog écrit en PHP développé par des français (Olivier Meunier au départ, Franck Paul désormais). Il est désormais propulsé par Hugo.
J&rsquo;ai beaucoup utilisé Dotclear, je l&rsquo;ai beaucoup aimé. A l&rsquo;époque l&rsquo;organisation du code PHP de Dotclear était bien meilleure que celle de Wordpress (j&rsquo;avoue n&rsquo;avoir pas regardé le code de Wordpress aujourd&rsquo;hui). Un effort particulier était fait sur l&rsquo;accessibilité."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Migration de ce blog","name":"Migration de ce blog","description":"Ce blog a longtemps été propulsé par le moteur de blog Dotclear, un moteur de blog écrit en PHP développé par des français (Olivier Meunier au départ, Franck Paul désormais). Il …","keywords":["dotclear","blog","hugo","markdown"],"articleBody":"Ce blog a longtemps été propulsé par le moteur de blog Dotclear, un moteur de blog écrit en PHP développé par des français (Olivier Meunier au départ, Franck Paul désormais). Il est désormais propulsé par Hugo.\nJ’ai beaucoup utilisé Dotclear, je l’ai beaucoup aimé. A l’époque l’organisation du code PHP de Dotclear était bien meilleure que celle de Wordpress (j’avoue n’avoir pas regardé le code de Wordpress aujourd’hui). Un effort particulier était fait sur l’accessibilité. Plusieurs audits accessibilités avaient été réalisés sur le back-office et sur les principaux thèmes.\nLa communauté (proche de celle de Paris-Web) semblait chouette.\nLe projet “Dotclear” est toujours maintenu. Des mises à jour continuent d’arriver (Merci Franck) mais personnellement, je souhaitais passer à autre chose.\nDans un esprit “low-tech”, je ne souhaitais plus dépendre d’un serveur PHP ou d’une base de données pour héberger un contenu qui ne bouge quasiment pas.\nLes contenus de ce site sont désormais écrits dans des fichiers textes au format Markdown. Je dois lancer une moulinette (hugo --minify) pour générer ce site et quelques autres commandes git pour le publier.\nLes pages générées sont hébergées sur Github via les Github Pages mais je pourrais très bien faire de l’auto-hébergement et l’héberger sur un minuscule serveur vu le peu de visiteurs et le peu de ressources nécessaires pour juste servir une page HTML et ses médias. Cela fera l’objet d’une future mission…\nEn passant à Hugo, je perds quelques fonctionnalités comme les commentaires. Si vous avez à me contacter, vous pouvez toujours utiliser le mail franek [à] chicour [point] net.\nPour ceux qui souhaiteraient migrer de Dotclear à Hugo, voici les quelques étapes que j’ai réalisées.\nIl est à noter que Dotclear dispose de sa propre syntaxe “wiki2xhtml” pour écrire ses billets. Depuis plusieurs versions, il est possible d’écrire au format Markdown mais j’ai un historique d’articles qui étaient encore écrits dans ce format.\nIl y a quelques années, je m’étais lancé dans l’écriture d’un plugin de conversion de “wiki2xhtml” vers Markdown mais je ne l’ai jamais terminé (ni vraiment commencé d’ailleurs).\nPour effectuer la migration, je suis donc parti du contenu HTML exposé dans le flux RSS pour générer l’ensemble des articles. Il existe plusieurs scripts Python qui font ça mais tous ceux que j’ai testés avaient de petits problèmes (non support de certaines balises, …) et je me retrouvais avec une perte d’informations dans certains billets. J’ai donc écrit rapidement mon propre script de migration. Il n’est clairement pas parfait mais il a fonctionné pour moi.\nEn très rapide, les étapes que j’ai réalisées pour la migration sont :\n Configurer Dotclear afin que l’ensemble des articles soient exposés dans le flux ATOM  Les options importantes sont :\n “Afficher 200 billets par flux de syndication” (si vous avez plus de billets, vous devez augmenter cette valeur). Décocher “Tronquer les flux de syndication”  Installer le script de migration  $ git clone git@github.com:franek/dotclear2hugo.git $ cd dotclear2hugo $ composer install Exécuter le script afin d’exporter le contenu au format Markdown  php bin/console dotclear2hugo -f https://blog.domain.com/feed/atom  Installer gohugo et déplacer le répertoire content/post dans le répertoire content de l’installation de gohugo\n  Récupérer l’ensemble des médias de Dotclear et les copier dans le répertoire static de l’installation de gohugo.\n  Configurer Hugo et le déployer.\n  La peinture est fraîche, il reste encore des petites choses à faire mais le gros de la migration est fait.\nVous aurez peut-être la chance d’avoir d’autres billets de blog cette année 👋.\n","wordCount":"572","inLanguage":"fr","image":"https://franek.chicour.net/public/migration-blog-the-nigmatic-68RMbT06_ro-unsplash.jpg","datePublished":"2021-01-02T21:34:13+01:00","dateModified":"2021-01-02T21:34:13+01:00","author":{"@type":"Person","name":"Franek"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://franek.chicour.net/post/migration-de-ce-blog/"},"publisher":{"@type":"Organization","name":"::franek::","logo":{"@type":"ImageObject","url":"https://franek.chicour.net/favicon.ico"}}}</script></head><body id=top><noscript><style type=text/css>.theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://franek.chicour.net accesskey=h title="::franek:: (Alt + H)"><img src=/public/logo-franek.png alt=logo aria-label=logo height=35>::franek::</a>
<span class=logo-switches></span></div><ul class=menu id=menu onscroll=menu_on_scroll()><li><a href=https://franek.chicour.net/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://franek.chicour.net/archive/ title=Archives><span>Archives</span></a></li><li><a href=https://franek.chicour.net/search/ title="Recherche (Alt + /)" accesskey=/><span>Recherche</span></a></li><li><a href=https://franek.chicour.net/feed/rss2 title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Migration de ce blog</h1><div class=post-meta>January 2, 2021&nbsp;·&nbsp;Franek</div></header><figure class=entry-cover><img src=https://franek.chicour.net/public/migration-blog-the-nigmatic-68RMbT06_ro-unsplash.jpg alt="Migration d'oiseaux"><p>source: <a href=https://unsplash.com/photos/68RMbT06_ro>https://unsplash.com/photos/68RMbT06_ro</a></p></figure><div class=post-content><p>Ce blog a longtemps été propulsé par le moteur de blog <a href=http://www.dotclear.org>Dotclear</a>, un moteur de blog écrit en PHP développé par des français (Olivier Meunier au départ, <a href=https://open-time.net/>Franck Paul</a> désormais). Il est désormais propulsé par <a href=https://gohugo.io/>Hugo</a>.</p><p>J&rsquo;ai beaucoup utilisé Dotclear, je l&rsquo;ai beaucoup aimé.
A l&rsquo;époque l&rsquo;organisation du code PHP de Dotclear était bien meilleure que celle de Wordpress (j&rsquo;avoue n&rsquo;avoir pas regardé le code de Wordpress aujourd&rsquo;hui). Un effort particulier était fait sur l&rsquo;accessibilité.
Plusieurs audits accessibilités avaient été réalisés sur le back-office et sur les principaux thèmes.</p><p>La communauté (proche de celle de Paris-Web) semblait chouette.</p><p>Le projet &ldquo;Dotclear&rdquo; est toujours maintenu. Des mises à jour continuent d&rsquo;arriver (Merci Franck) mais personnellement, je souhaitais passer à autre chose.</p><p>Dans un esprit &ldquo;low-tech&rdquo;, je ne souhaitais plus dépendre d&rsquo;un serveur PHP ou d&rsquo;une base de données pour héberger un contenu qui ne bouge quasiment pas.</p><p>Les contenus de ce site sont désormais écrits dans des fichiers textes au format Markdown. Je dois lancer une moulinette (<code>hugo --minify</code>) pour générer ce site et quelques autres commandes git pour le publier.</p><p>Les pages générées sont hébergées sur Github via les <a href=https://pages.github.com/>Github Pages</a> mais je pourrais très bien faire de l&rsquo;auto-hébergement et l&rsquo;héberger sur un minuscule serveur vu le peu de visiteurs et le peu de ressources nécessaires pour juste servir une page HTML et ses médias. Cela fera l&rsquo;objet d&rsquo;une future mission&mldr;</p><p>En passant à Hugo, je perds quelques fonctionnalités comme les commentaires. Si vous avez à me contacter, vous pouvez toujours utiliser le mail franek [à] chicour [point] net.</p><p>Pour ceux qui souhaiteraient migrer de Dotclear à Hugo, voici les quelques étapes que j&rsquo;ai réalisées.</p><p>Il est à noter que Dotclear dispose de sa propre syntaxe &ldquo;wiki2xhtml&rdquo; pour écrire ses billets. Depuis plusieurs versions, il est possible d&rsquo;écrire au format Markdown mais j&rsquo;ai un historique d&rsquo;articles qui étaient encore écrits dans ce format.</p><p>Il y a quelques années, je m&rsquo;étais lancé dans l&rsquo;écriture d&rsquo;un plugin de conversion de &ldquo;wiki2xhtml&rdquo; vers Markdown mais je ne l&rsquo;ai jamais terminé (ni vraiment commencé d&rsquo;ailleurs).</p><p>Pour effectuer la migration, je suis donc parti du contenu HTML exposé dans le flux RSS pour générer l&rsquo;ensemble des articles.
Il existe plusieurs scripts Python qui font ça mais tous ceux que j&rsquo;ai testés avaient de petits problèmes (non support de certaines balises, &mldr;) et je me retrouvais avec une perte d&rsquo;informations dans certains billets. J&rsquo;ai donc écrit rapidement mon propre <a href=https://github.com/franek/dotclear2hugo>script de migration</a>. Il n&rsquo;est clairement pas parfait mais il a fonctionné pour moi.</p><p>En très rapide, les étapes que j&rsquo;ai réalisées pour la migration sont :</p><ol><li>Configurer Dotclear afin que l&rsquo;ensemble des articles soient exposés dans le flux ATOM</li></ol><p><img src=/public/migration-blog-conf-dotclear.png alt="Configuration dotclear"></p><p>Les options importantes sont :</p><ul><li>&ldquo;Afficher 200 billets par flux de syndication&rdquo; (si vous avez plus de billets, vous devez augmenter cette valeur).</li><li>Décocher &ldquo;Tronquer les flux de syndication&rdquo;</li></ul><ol start=2><li>Installer le script de migration</li></ol><pre><code>$ git clone git@github.com:franek/dotclear2hugo.git
$ cd dotclear2hugo
$ composer install
</code></pre><ol start=3><li>Exécuter le script afin d&rsquo;exporter le contenu au format Markdown</li></ol><pre><code>php bin/console dotclear2hugo -f https://blog.domain.com/feed/atom
</code></pre><ol start=4><li><p>Installer <code>gohugo</code> et déplacer le répertoire <code>content/post</code> dans le répertoire <code>content</code> de l&rsquo;installation de gohugo</p></li><li><p>Récupérer l&rsquo;ensemble des médias de Dotclear et les copier dans le répertoire <code>static</code> de l&rsquo;installation de gohugo.</p></li><li><p>Configurer Hugo et le déployer.</p></li></ol><p>La peinture est fraîche, il reste encore des petites choses à faire mais le gros de la migration est fait.</p><p>Vous aurez peut-être la chance d&rsquo;avoir d&rsquo;autres billets de blog cette année 👋.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://franek.chicour.net/tags/dotclear/>dotclear</a></li><li><a href=https://franek.chicour.net/tags/blog/>blog</a></li><li><a href=https://franek.chicour.net/tags/hugo/>hugo</a></li><li><a href=https://franek.chicour.net/tags/markdown/>markdown</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://franek.chicour.net>::franek::</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=https://franek.chicour.net/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});if(id==="top"){history.replaceState(null,null," ");}else{history.replaceState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script></body></html>