<!doctype html><html lang=fr dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Linux : Accès à mysql derrière un firewall (iptables) | ::franek::</title><meta name=keywords content="geek,iptables,mysql"><meta name=description content="Je souhaite pouvoir accéder à une base mysql hébergée sur un serveur distant depuis un pc local. Ce serveur distant est protégé par un firewall (iptables).
Comment configurer mysql et iptables afin de pouvoir accéder à cette base mysql depuis mon poste local ?
Dans la suite de ce billet,
 10.10.10.10 correspond à l&rsquo;adresse IP du pc local 12.12.12.12 coresspond à l&rsquo;adresse IP du serveur distant  Par défaut, sous debian, mysql n&rsquo;écoute que sur l&rsquo;interface locale (localhost)."><meta name=author content="franek"><link rel=canonical href=https://franek.chicour.net/post/linux-acces-a-mysql-derriere-un-firewall-iptables/><meta name=google-site-verification content="XYZabc"><link href=https://franek.chicour.net/assets/css/stylesheet.min.b6e4fb9d9486ee9750cbbe1b4e388ff4332a2d1e0d17ab3592ecb6c6f7ba1157.css integrity="sha256-tuT7nZSG7pdQy74bTjiP9DMqLR4NF6s1kuy2xve6EVc=" rel="preload stylesheet" as=style><link rel=icon href=https://franek.chicour.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://franek.chicour.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://franek.chicour.net/favicon-32x32.png><link rel=apple-touch-icon href=https://franek.chicour.net/apple-touch-icon.png><link rel=mask-icon href=https://franek.chicour.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.79.1"><meta property="og:title" content="Linux : Accès à mysql derrière un firewall (iptables)"><meta property="og:description" content="Je souhaite pouvoir accéder à une base mysql hébergée sur un serveur distant depuis un pc local. Ce serveur distant est protégé par un firewall (iptables).
Comment configurer mysql et iptables afin de pouvoir accéder à cette base mysql depuis mon poste local ?
Dans la suite de ce billet,
 10.10.10.10 correspond à l&rsquo;adresse IP du pc local 12.12.12.12 coresspond à l&rsquo;adresse IP du serveur distant  Par défaut, sous debian, mysql n&rsquo;écoute que sur l&rsquo;interface locale (localhost)."><meta property="og:type" content="article"><meta property="og:url" content="https://franek.chicour.net/post/linux-acces-a-mysql-derriere-un-firewall-iptables/"><meta property="og:image" content="https://franek.chicour.net/60"><meta property="article:published_time" content="2011-03-04T22:58:00+01:00"><meta property="article:modified_time" content="2011-03-04T23:04:19+01:00"><meta property="og:site_name" content="::franek::"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://franek.chicour.net/60"><meta name=twitter:title content="Linux : Accès à mysql derrière un firewall (iptables)"><meta name=twitter:description content="Je souhaite pouvoir accéder à une base mysql hébergée sur un serveur distant depuis un pc local. Ce serveur distant est protégé par un firewall (iptables).
Comment configurer mysql et iptables afin de pouvoir accéder à cette base mysql depuis mon poste local ?
Dans la suite de ce billet,
 10.10.10.10 correspond à l&rsquo;adresse IP du pc local 12.12.12.12 coresspond à l&rsquo;adresse IP du serveur distant  Par défaut, sous debian, mysql n&rsquo;écoute que sur l&rsquo;interface locale (localhost)."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Linux : Accès à mysql derrière un firewall (iptables)","name":"Linux : Accès à mysql derrière un firewall (iptables)","description":"Je souhaite pouvoir accéder à une base mysql hébergée sur un serveur distant depuis un pc local. Ce serveur distant est protégé par un firewall (iptables).\nComment configurer mysql …","keywords":["geek","iptables","mysql"],"articleBody":"Je souhaite pouvoir accéder à une base mysql hébergée sur un serveur distant depuis un pc local. Ce serveur distant est protégé par un firewall (iptables).\nComment configurer mysql et iptables afin de pouvoir accéder à cette base mysql depuis mon poste local ?\nDans la suite de ce billet,\n 10.10.10.10 correspond à l’adresse IP du pc local 12.12.12.12 coresspond à l’adresse IP du serveur distant  Par défaut, sous debian, mysql n’écoute que sur l’interface locale (localhost). Il est donc nécessaire de configurer mysql afin qu’il écoute sur l’ensemble des interfaces. Pour se faire, il est nécessaire dans le fichier /etc/my.cnf de commenter la ligne suivante :\n bind-address = 127.0.0.1 puis redémarrer mysql\nPour vérifier que le paramétrage a bien été pris en compte, vous pouvez exécuter sur le serveur distant la commande suivante :\n # netstat -lnt | grep 3306 tcp 0 0 0.0.0.0:3306 0.0.0.0:* LISTEN Si votre serveur dispose d’un firewall (iptables) bloquant les ports non utiles, il est nécessaire d’ouvrir les ports associés à mysql pour votre PC local :\n iptables -A INPUT -s 10.10.10.10 -m state --state NEW -m tcp -p tcp --dport 3306 -j ACCEPT avec 10.10.10.10 correspondant à l’IP depuis laquelle vous souhaitez accéder à mysql\nPour vérifier que le paramétrage est bien pris en compte, vous pouvez utiliser nmap :\n nmap -v -A 12.12.12.12 -p 3306 Dès lors si tout s’est bien passé, vous devriez pouvoir vous connecter à mysql :\n mysql -ulogin -ppassword -h 12.12.12.12 ","wordCount":"243","inLanguage":"fr","datePublished":"2011-03-04T22:58:00+01:00","dateModified":"2011-03-04T23:04:19+01:00","author":[{"@type":"Person","name":"franek"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://franek.chicour.net/post/linux-acces-a-mysql-derriere-un-firewall-iptables/"},"publisher":{"@type":"Organization","name":"::franek::","logo":{"@type":"ImageObject","url":"https://franek.chicour.net/favicon.ico"}}}</script></head><body id=top><noscript><style type=text/css>.theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://franek.chicour.net accesskey=h title="::franek:: (Alt + H)"><img src=/public/logo-franek.png alt=logo aria-label=logo height=35>::franek::</a>
<span class=logo-switches></span></div><ul class=menu id=menu onscroll=menu_on_scroll()><li><a href=https://franek.chicour.net/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://franek.chicour.net/archive/ title=Archives><span>Archives</span></a></li><li><a href=https://franek.chicour.net/search/ title="Recherche (Alt + /)" accesskey=/><span>Recherche</span></a></li><li><a href=https://franek.chicour.net/feed/rss2 title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Linux : Accès à mysql derrière un firewall (iptables)</h1><div class=post-meta>March 4, 2011&nbsp;·&nbsp;franek</div></header><div class=post-content><p>Je souhaite pouvoir accéder à une base mysql hébergée sur un serveur distant depuis un pc local. Ce serveur distant est protégé par un firewall (iptables).</p><p>Comment configurer mysql et iptables afin de pouvoir accéder à cette base mysql depuis mon poste local ?</p><p>Dans la suite de ce billet,</p><ul><li>10.10.10.10 correspond à l&rsquo;adresse IP du pc local</li><li>12.12.12.12 coresspond à l&rsquo;adresse IP du serveur distant</li></ul><p>Par défaut, sous debian, mysql n&rsquo;écoute que sur l&rsquo;interface locale (localhost). Il est donc nécessaire de configurer mysql afin qu&rsquo;il écoute sur l&rsquo;ensemble des interfaces. Pour se faire, il est nécessaire dans le fichier /etc/my.cnf de commenter la ligne suivante :</p><pre><code>
bind-address           = 127.0.0.1
</code></pre><p>puis redémarrer mysql</p><p>Pour vérifier que le paramétrage a bien été pris en compte, vous pouvez exécuter sur le serveur distant la commande suivante :</p><pre><code>
# netstat -lnt | grep 3306
tcp        0      0 0.0.0.0:3306            0.0.0.0:*               LISTEN
</code></pre><p>Si votre serveur dispose d&rsquo;un firewall (iptables) bloquant les ports non utiles, il est nécessaire d&rsquo;ouvrir les ports associés à mysql pour votre PC local :</p><pre><code>
iptables -A INPUT -s 10.10.10.10 -m state --state NEW -m tcp -p tcp --dport 3306 -j ACCEPT
</code></pre><p>avec 10.10.10.10 correspondant à l&rsquo;IP depuis laquelle vous souhaitez accéder à mysql</p><p>Pour vérifier que le paramétrage est bien pris en compte, vous pouvez utiliser nmap :</p><pre><code>
nmap -v -A 12.12.12.12 -p 3306
</code></pre><p>Dès lors si tout s&rsquo;est bien passé, vous devriez pouvoir vous connecter à mysql :</p><pre><code>
mysql -ulogin -ppassword -h 12.12.12.12
</code></pre></div><footer class=post-footer><ul class=post-tags><li><a href=https://franek.chicour.net/tags/geek/>geek</a></li><li><a href=https://franek.chicour.net/tags/iptables/>iptables</a></li><li><a href=https://franek.chicour.net/tags/mysql/>mysql</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://franek.chicour.net>::franek::</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=https://franek.chicour.net/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});if(id==="top"){history.replaceState(null,null," ");}else{history.replaceState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script></body></html>