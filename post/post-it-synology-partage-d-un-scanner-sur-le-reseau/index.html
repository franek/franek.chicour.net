<!doctype html><html lang=fr dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Post-it : Synology partage d'un scanner sur le réseau | ::franek::</title><meta name=keywords content="geek,ds-211,hp,network,PSC-1100,réseau,scanner,synology,ubuntu"><meta name=description content="En branchant son imprimante 2-en-1 (dans mon cas HP PSC-1100 All-in-one) sur un synology (dans mon cas, DS-211+), Il est possible de facilement partager son imprimante sur le réseau.
Le partage du scanner est un peu moins documenté (à moins que votre imprimante all-in-one supporte le protocole MFP). Pour une liste d&rsquo;imprimantes compatibles avec le Synology, vous pouvez référer à la liste disponible sur le site du constructeur.
Dans notre cas, nous allons devoir bidouiller (&ldquo;Hackability is fun !"><meta name=author content="franek"><link rel=canonical href=https://franek.chicour.net/post/post-it-synology-partage-d-un-scanner-sur-le-reseau/><meta name=google-site-verification content="XYZabc"><link href=https://franek.chicour.net/assets/css/stylesheet.min.b6e4fb9d9486ee9750cbbe1b4e388ff4332a2d1e0d17ab3592ecb6c6f7ba1157.css integrity="sha256-tuT7nZSG7pdQy74bTjiP9DMqLR4NF6s1kuy2xve6EVc=" rel="preload stylesheet" as=style><link rel=icon href=https://franek.chicour.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://franek.chicour.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://franek.chicour.net/favicon-32x32.png><link rel=apple-touch-icon href=https://franek.chicour.net/apple-touch-icon.png><link rel=mask-icon href=https://franek.chicour.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.79.1"><meta property="og:title" content="Post-it : Synology partage d'un scanner sur le réseau"><meta property="og:description" content="En branchant son imprimante 2-en-1 (dans mon cas HP PSC-1100 All-in-one) sur un synology (dans mon cas, DS-211+), Il est possible de facilement partager son imprimante sur le réseau.
Le partage du scanner est un peu moins documenté (à moins que votre imprimante all-in-one supporte le protocole MFP). Pour une liste d&rsquo;imprimantes compatibles avec le Synology, vous pouvez référer à la liste disponible sur le site du constructeur.
Dans notre cas, nous allons devoir bidouiller (&ldquo;Hackability is fun !"><meta property="og:type" content="article"><meta property="og:url" content="https://franek.chicour.net/post/post-it-synology-partage-d-un-scanner-sur-le-reseau/"><meta property="og:image" content="https://franek.chicour.net/60"><meta property="article:published_time" content="2011-09-20T14:48:00+02:00"><meta property="article:modified_time" content="2011-09-24T13:11:16+02:00"><meta property="og:site_name" content="::franek::"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://franek.chicour.net/60"><meta name=twitter:title content="Post-it : Synology partage d'un scanner sur le réseau"><meta name=twitter:description content="En branchant son imprimante 2-en-1 (dans mon cas HP PSC-1100 All-in-one) sur un synology (dans mon cas, DS-211+), Il est possible de facilement partager son imprimante sur le réseau.
Le partage du scanner est un peu moins documenté (à moins que votre imprimante all-in-one supporte le protocole MFP). Pour une liste d&rsquo;imprimantes compatibles avec le Synology, vous pouvez référer à la liste disponible sur le site du constructeur.
Dans notre cas, nous allons devoir bidouiller (&ldquo;Hackability is fun !"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Post-it : Synology partage d'un scanner sur le réseau","name":"Post-it : Synology partage d\u0027un scanner sur le réseau","description":"En branchant son imprimante 2-en-1 (dans mon cas HP PSC-1100 All-in-one) sur un synology (dans mon cas, DS-211+), Il est possible de facilement partager son imprimante sur le …","keywords":["geek","ds-211","hp","network","PSC-1100","réseau","scanner","synology","ubuntu"],"articleBody":"En branchant son imprimante 2-en-1 (dans mon cas HP PSC-1100 All-in-one) sur un synology (dans mon cas, DS-211+), Il est possible de facilement partager son imprimante sur le réseau.\nLe partage du scanner est un peu moins documenté (à moins que votre imprimante all-in-one supporte le protocole MFP). Pour une liste d’imprimantes compatibles avec le Synology, vous pouvez référer à la liste disponible sur le site du constructeur.\nDans notre cas, nous allons devoir bidouiller (“Hackability is fun !”…)\nLes tutoriaux suivants sont une bonne base :\n partage d’un scanner sur le réseau sur ubuntu.com Attaching a scanner to my Synology Diskstation 107  On va utiliser sane pour partager le scanner. Par défaut, sane ne dispose pas des drivers HP. Il va donc falloir les installer et lui dire qu’ils ont été installés !\n1- Installer, de mémoire, les paquets suivants via ipkg :\n $ ipkg install hplip libusb libieee1284 sane-backends xinetd 2- L’astuce dans mon cas est d’ajouter le support des drivers HP à sane :\n sudo echo \"hpaio\"  /opt/etc/sane.d/dll.conf sudo echo \"hpaio\"  /opt/etc/sane.d/dll.d/hplip 3- On vérifie que le scanner est bien reconnu :\n sane-find-scanner Cela doit retourner quelque chose comme :\n found USB scanner (vendor=0x03f0 [Hewlett-Packard], product=0x3011 [psc 1100 series]) at libusb:001:003 Si le scanner n’a pas été reconnu, passer votre chemin.\n4- Si le scanner a été reconnu, on va vérifier la compatibilité avec sane :\n scanimage -L Cette ligne doit retourner quelque chose comme :\n device `hpaio:/usb/psc_1100_series?serial=MY369160GQB0' is a Hewlett-Packard psc_1100_series all-in-one Si elle ne retourne pas ce type d’information, vérifier la configuration de sane et notamment les fichiers dll.conf et hplip.\nVotre scanner devrait fonctionner sur le réseau. Pour qu’il fonctionne sur le réseau, il faut s’assurer de 2-3 petites choses.\nVérifier que dans le fichier /opt/etc/xinetd.conf votre sous-réseau est bien présent :\n only_from = localhost 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16 ainsi que dans le fichier /opt/etc/sane.d/saned.conf :\n 192.168.0.0/16 Configurer sane\n vi /opt/etc/xinetd.d/sane-port Ajouter :\n service sane-port { port = 6566 socket_type = stream wait = no user = root group = root server = /opt/sbin/saned } Vérifier que le fichier /etc/services contient bien :\n sane-port 6566/tcp # SANE network scanner daemon Vous pouvez ensuite démarrer sane :\n /opt/etc/init.d/S10xinetd Sur le poste client, une seule modification :\n sudo vi /etc/sane.d/net.conf Remplacer # localhost par l'ip de votre serveur.\nDepuis votre poste client, scanimage -L devrait renvoyer quelque chose comme :\n device `net::hpaio:/usb/psc_1100_series?serial=MY369160GQB0' is a Hewlett-Packard psc_1100_series all-in-one Voilà, ce sont quelques notes rapides qui seront peut-être utiles à d’autres.\nEDITBon, parfois, le scanner n’est pas accessible depuis le client. J’ai résolu ce problème en supprimant le fichier de PID de dbus et en relançant le process dbus :\n $ rm /opt/var/run/dbus/pid $ /opt/etc/init.d/S20dbus start (source : http://forum.synology.com/enu/viewtopic.php?f=27\u0026amp;t=14801)\n","wordCount":"453","inLanguage":"fr","datePublished":"2011-09-20T14:48:00+02:00","dateModified":"2011-09-24T13:11:16+02:00","author":[{"@type":"Person","name":"franek"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://franek.chicour.net/post/post-it-synology-partage-d-un-scanner-sur-le-reseau/"},"publisher":{"@type":"Organization","name":"::franek::","logo":{"@type":"ImageObject","url":"https://franek.chicour.net/favicon.ico"}}}</script></head><body id=top><noscript><style type=text/css>.theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://franek.chicour.net accesskey=h title="::franek:: (Alt + H)"><img src=/public/logo-franek.png alt=logo aria-label=logo height=35>::franek::</a>
<span class=logo-switches></span></div><ul class=menu id=menu onscroll=menu_on_scroll()><li><a href=https://franek.chicour.net/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://franek.chicour.net/archive/ title=Archives><span>Archives</span></a></li><li><a href=https://franek.chicour.net/search/ title="Recherche (Alt + /)" accesskey=/><span>Recherche</span></a></li><li><a href=https://franek.chicour.net/feed/rss2 title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Post-it : Synology partage d'un scanner sur le réseau</h1><div class=post-meta>September 20, 2011&nbsp;·&nbsp;franek</div></header><div class=post-content><p>En branchant son imprimante 2-en-1 (dans mon cas HP PSC-1100 All-in-one) sur un synology (dans mon cas, DS-211+), Il est possible de facilement partager son imprimante sur le réseau.</p><p>Le partage du scanner est un peu moins documenté (à moins que votre imprimante all-in-one supporte le protocole MFP). Pour une liste d&rsquo;imprimantes compatibles avec le Synology, vous pouvez référer à la <a href=http://forum.synology.com/wiki/index.php/User_Reported_Compatible_USB_Printers title="Imprimante compatible avec Synology">liste disponible sur le site du constructeur</a>.</p><p>Dans notre cas, nous allons devoir bidouiller (&ldquo;Hackability is fun !&rdquo;&mldr;)</p><p>Les tutoriaux suivants sont une bonne base :</p><ul><li><a href=https://help.ubuntu.com/community/ScanningHowTo>partage d&rsquo;un scanner sur le réseau sur ubuntu.com</a></li><li><a href="http://arnoutboer.nl/weblog/?p=223">Attaching a scanner to my Synology Diskstation 107</a></li></ul><p>On va utiliser sane pour partager le scanner. Par défaut, sane ne dispose pas des drivers HP. Il va donc falloir les installer et lui dire qu&rsquo;ils ont été installés !</p><p>1- Installer, de mémoire, les paquets suivants via ipkg :</p><pre><code>
$ ipkg install hplip libusb libieee1284 sane-backends xinetd
</code></pre><p>2- L&rsquo;astuce dans mon cas est d&rsquo;ajouter le support des drivers HP à sane :</p><pre><code>
sudo echo &quot;hpaio&quot; &gt;&gt; /opt/etc/sane.d/dll.conf
sudo echo &quot;hpaio&quot; &gt; /opt/etc/sane.d/dll.d/hplip
</code></pre><p>3- On vérifie que le scanner est bien reconnu :</p><pre><code>
sane-find-scanner
</code></pre><p>Cela doit retourner quelque chose comme :</p><pre><code>
found USB scanner (vendor=0x03f0 [Hewlett-Packard], product=0x3011 [psc 1100 series]) at libusb:001:003
</code></pre><p>Si le scanner n&rsquo;a pas été reconnu, passer votre chemin.</p><p>4- Si le scanner a été reconnu, on va vérifier la compatibilité avec sane :</p><pre><code>
scanimage -L
</code></pre><p>Cette ligne doit retourner quelque chose comme :</p><pre><code>
device `hpaio:/usb/psc_1100_series?serial=MY369160GQB0' is a Hewlett-Packard psc_1100_series all-in-one
</code></pre><p>Si elle ne retourne pas ce type d&rsquo;information, vérifier la configuration de sane et notamment les fichiers dll.conf et hplip.</p><p>Votre scanner devrait fonctionner sur le réseau. Pour qu&rsquo;il fonctionne sur le réseau, il faut s&rsquo;assurer de 2-3 petites choses.</p><p>Vérifier que dans le fichier /opt/etc/xinetd.conf votre sous-réseau est bien présent :</p><pre><code>
    only_from = localhost 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16
</code></pre><p>ainsi que dans le fichier /opt/etc/sane.d/saned.conf :</p><pre><code>
192.168.0.0/16
</code></pre><p>Configurer sane</p><pre><code>
vi /opt/etc/xinetd.d/sane-port
</code></pre><p>Ajouter :</p><pre><code>
service sane-port
{
    port = 6566
    socket_type = stream
    wait = no
    user = root
    group = root
    server = /opt/sbin/saned
}
</code></pre><p>Vérifier que le fichier /etc/services contient bien :</p><pre><code>
  sane-port         6566/tcp        # SANE network scanner daemon
</code></pre><p>Vous pouvez ensuite démarrer sane :</p><pre><code>
/opt/etc/init.d/S10xinetd
</code></pre><p>Sur le poste client, une seule modification :</p><pre><code>
sudo vi /etc/sane.d/net.conf
</code></pre><p>Remplacer <strong># localhost</strong> par l'<strong>ip de votre serveur</strong>.</p><p>Depuis votre poste client, scanimage -L devrait renvoyer quelque chose comme :</p><pre><code>
device `net:&lt;votre ip&gt;:hpaio:/usb/psc_1100_series?serial=MY369160GQB0' is a Hewlett-Packard psc_1100_series all-in-one
</code></pre><p>Voilà, ce sont quelques notes rapides qui seront peut-être utiles à d&rsquo;autres.</p><p><a href=https://franek.chicour.net/post/2011/09/20/EDIT title=EDIT>EDIT</a>Bon, parfois, le scanner n&rsquo;est pas accessible depuis le client. J&rsquo;ai résolu ce problème en supprimant le fichier de PID de dbus et en relançant le process dbus :</p><pre><code>
$ rm /opt/var/run/dbus/pid
$ /opt/etc/init.d/S20dbus start
</code></pre><p>(source : <a href="http://forum.synology.com/enu/viewtopic.php?f=27&amp;amp;t=14801">http://forum.synology.com/enu/viewtopic.php?f=27&amp;amp;t=14801</a>)</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://franek.chicour.net/tags/geek/>geek</a></li><li><a href=https://franek.chicour.net/tags/ds-211/>ds-211</a></li><li><a href=https://franek.chicour.net/tags/hp/>hp</a></li><li><a href=https://franek.chicour.net/tags/network/>network</a></li><li><a href=https://franek.chicour.net/tags/psc-1100/>PSC-1100</a></li><li><a href=https://franek.chicour.net/tags/r%C3%A9seau/>réseau</a></li><li><a href=https://franek.chicour.net/tags/scanner/>scanner</a></li><li><a href=https://franek.chicour.net/tags/synology/>synology</a></li><li><a href=https://franek.chicour.net/tags/ubuntu/>ubuntu</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://franek.chicour.net>::franek::</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=https://franek.chicour.net/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});if(id==="top"){history.replaceState(null,null," ");}else{history.replaceState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script></body></html>