<!doctype html><html lang=fr dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Jenkins : Respect des conventions de codage Javascript avec JSLint | ::franek::</title>
<meta name=keywords content="développement web,intégration continue,jenkins,jslint,phing,php"><meta name=description content="Imaginons que vous disposez d&rsquo;une plate-forme d&rsquo;intégration continue (idéalement Jenkins ou Hudson) pour vos projets PHP (si ce n&rsquo;est pas le cas, je vous invite à lire les excellents billets de Pascal Martin : Intégration continue avec Jenkins : installation et configuration de base et Intégration continue d&rsquo;un projet PHP avec Jenkins).
Imaginons que vous n&rsquo;utilisez pas Ant comme outil d&rsquo;automatisation (de build) mais plutôt Phing parce que vous maîtrisez cet outil."><meta name=author content="franek"><link rel=canonical href=https://franek.chicour.net/post/jenkins-respect-des-conventions-de-codage-javascript-avec-jslint/><meta name=google-site-verification content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://franek.chicour.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://franek.chicour.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://franek.chicour.net/favicon-32x32.png><link rel=apple-touch-icon href=https://franek.chicour.net/apple-touch-icon.png><link rel=mask-icon href=https://franek.chicour.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=fr href=https://franek.chicour.net/post/jenkins-respect-des-conventions-de-codage-javascript-avec-jslint/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://franek.chicour.net/post/jenkins-respect-des-conventions-de-codage-javascript-avec-jslint/"><meta property="og:site_name" content="::franek::"><meta property="og:title" content="Jenkins : Respect des conventions de codage Javascript avec JSLint"><meta property="og:description" content="Imaginons que vous disposez d’une plate-forme d’intégration continue (idéalement Jenkins ou Hudson) pour vos projets PHP (si ce n’est pas le cas, je vous invite à lire les excellents billets de Pascal Martin : Intégration continue avec Jenkins : installation et configuration de base et Intégration continue d’un projet PHP avec Jenkins).
Imaginons que vous n’utilisez pas Ant comme outil d’automatisation (de build) mais plutôt Phing parce que vous maîtrisez cet outil."><meta property="og:locale" content="fr"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2011-10-10T13:21:00+02:00"><meta property="article:modified_time" content="2011-10-23T17:00:15+02:00"><meta property="article:tag" content="Développement Web"><meta property="article:tag" content="Intégration Continue"><meta property="article:tag" content="Jenkins"><meta property="article:tag" content="Jslint"><meta property="article:tag" content="Phing"><meta property="article:tag" content="Php"><meta name=twitter:card content="summary"><meta name=twitter:title content="Jenkins : Respect des conventions de codage Javascript avec JSLint"><meta name=twitter:description content="Imaginons que vous disposez d&rsquo;une plate-forme d&rsquo;intégration continue (idéalement Jenkins ou Hudson) pour vos projets PHP (si ce n&rsquo;est pas le cas, je vous invite à lire les excellents billets de Pascal Martin : Intégration continue avec Jenkins : installation et configuration de base et Intégration continue d&rsquo;un projet PHP avec Jenkins).
Imaginons que vous n&rsquo;utilisez pas Ant comme outil d&rsquo;automatisation (de build) mais plutôt Phing parce que vous maîtrisez cet outil."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://franek.chicour.net/post/"},{"@type":"ListItem","position":2,"name":"Jenkins : Respect des conventions de codage Javascript avec JSLint","item":"https://franek.chicour.net/post/jenkins-respect-des-conventions-de-codage-javascript-avec-jslint/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Jenkins : Respect des conventions de codage Javascript avec JSLint","name":"Jenkins : Respect des conventions de codage Javascript avec JSLint","description":"Imaginons que vous disposez d\u0026rsquo;une plate-forme d\u0026rsquo;intégration continue (idéalement Jenkins ou Hudson) pour vos projets PHP (si ce n\u0026rsquo;est pas le cas, je vous invite à lire les excellents billets de Pascal Martin : Intégration continue avec Jenkins : installation et configuration de base et Intégration continue d\u0026rsquo;un projet PHP avec Jenkins).\nImaginons que vous n\u0026rsquo;utilisez pas Ant comme outil d\u0026rsquo;automatisation (de build) mais plutôt Phing parce que vous maîtrisez cet outil.\n","keywords":["développement web","intégration continue","jenkins","jslint","phing","php"],"articleBody":"Imaginons que vous disposez d’une plate-forme d’intégration continue (idéalement Jenkins ou Hudson) pour vos projets PHP (si ce n’est pas le cas, je vous invite à lire les excellents billets de Pascal Martin : Intégration continue avec Jenkins : installation et configuration de base et Intégration continue d’un projet PHP avec Jenkins).\nImaginons que vous n’utilisez pas Ant comme outil d’automatisation (de build) mais plutôt Phing parce que vous maîtrisez cet outil.\nImaginons que vous souhaitez également vérifier la qualité de vos développement Javascript (Dans un projet PHP, vous avez sûrement un peu de Javascript, non ?) et que vous souhaitez disposer d’indicateur de suivi de la qualité dans Jenkins.\nIl existe plusieurs outils pour vérifier la qualité de son code Javascript :\nJslint de Douglas Crockford jslint4java un portage de jslint de Douglas Crockford en Java Google Closure Linter un outil développé par Google JsHint un fork de Jslint Javascript Lint dit JSL est un portage de jslint en Python. L’outil JSL n’a pas évolué depuis 2007. Il nécessite d’être installé en suivant l’une de ces procédures. Avantage, il existe une tâche Phing pour exécuter JSL. Inconvénient, il n’est pas possible de générer un fichier XML compréhensible par Jenkins.\nJe n’ai pas regardé Google Closure Linter.\nJSHint semble intéressant. Mais à nouveau, il ne semble pas y avoir de mécanisme simple permettant de l’intégrer à Jenkins.\nJslint ne permet pas, a priori, nativement de générer un fichier XML compréhensible par Jenkins.\nJe me suis donc tourné vers jslint4java. Je me suis inspiré du travail de Stephen Rees (qui utilise Ant) pour implémenter l’exécution de Jslint avec phing.\nVoici le résultat :\nFichiers analysés par JSLint : ${all_js} ${absfilename} Vous devez ensuite appeler cette tâche dans votre tâche principale de build. Quelque chose comme ça :\nVous pourrez ensuite configurer dans Jenkins l’appel du fichier de log (build/log/jslint.xml) : Après l’exécution du build, vous devriez avoir dans le menu Violations, quelque chose comme ça : ","wordCount":"616","inLanguage":"fr","datePublished":"2011-10-10T13:21:00+02:00","dateModified":"2011-10-23T17:00:15+02:00","author":[{"@type":"Person","name":"franek"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://franek.chicour.net/post/jenkins-respect-des-conventions-de-codage-javascript-avec-jslint/"},"publisher":{"@type":"Organization","name":"::franek::","logo":{"@type":"ImageObject","url":"https://franek.chicour.net/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://franek.chicour.net/ accesskey=h title="::franek:: (Alt + H)"><img src=https://franek.chicour.net/public/logo-franek.png alt aria-label=logo height=35>::franek::</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://franek.chicour.net/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://franek.chicour.net/archive/ title=Archives><span>Archives</span></a></li><li><a href=https://franek.chicour.net/search/ title="Recherche (Alt + /)" accesskey=/><span>Recherche</span></a></li><li><a href=https://franek.chicour.net/feed/rss2 title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Jenkins : Respect des conventions de codage Javascript avec JSLint</h1><div class=post-meta><span title='2011-10-10 13:21:00 +0200 +0200'>octobre 10, 2011</span>&nbsp;·&nbsp;franek</div></header><div class=post-content><p>Imaginons que vous disposez d&rsquo;une plate-forme d&rsquo;intégration continue (idéalement Jenkins ou Hudson) pour vos projets PHP (si ce n&rsquo;est pas le cas, je vous invite à lire les excellents billets de Pascal Martin :<a href=http://blog.pascal-martin.fr/post/integration-continue-jenkins-installation-configuration> Intégration continue avec Jenkins : installation et configuration de base</a> et <a href=http://blog.pascal-martin.fr/post/integration-continue-jenkins-projet-php>Intégration continue d&rsquo;un projet PHP avec Jenkins</a>).</p><p>Imaginons que vous n&rsquo;utilisez pas Ant comme outil d&rsquo;automatisation (de build) mais plutôt Phing parce que vous maîtrisez cet outil.</p><p>Imaginons que vous souhaitez également vérifier la qualité de vos développement Javascript (Dans un projet PHP, vous avez sûrement un peu de Javascript, non ?) et que vous souhaitez disposer d&rsquo;indicateur de suivi de la qualité dans Jenkins.</p><p>Il existe plusieurs outils pour vérifier la qualité de son code Javascript :</p><ul><li><a href=http://www.jslint.com/>Jslint</a> de Douglas Crockford</li><li><a href=http://code.google.com/p/jslint4java/>jslint4java</a> un portage de jslint de Douglas Crockford en Java</li><li><a href=http://code.google.com/intl/fr/closure/utilities/>Google Closure Linter</a> un outil développé par Google</li><li><a href=http://jshint.org/>JsHint</a> un fork de Jslint</li><li><a href=http://www.javascriptlint.com/>Javascript Lint</a> dit JSL est un portage de jslint en Python.</li></ul><p>L&rsquo;outil JSL n&rsquo;a pas évolué depuis 2007. Il nécessite d&rsquo;être installé en suivant l&rsquo;<a href=http://ioconnor.wordpress.com/2009/05/02/javascriptlint-vim-and-ubuntu/>une de ces procédures</a>. Avantage, il existe une <a href=http://www.phing.info/docs/guide/stable/chapters/appendixes/AppendixC-OptionalTasks.html#JslLintTask>tâche Phing pour exécuter JSL</a>. Inconvénient, il n&rsquo;est pas possible de générer un fichier XML compréhensible par Jenkins.</p><p>Je n&rsquo;ai pas regardé Google Closure Linter.</p><p>JSHint semble intéressant. Mais à nouveau, il ne semble pas y avoir de mécanisme simple permettant de l&rsquo;intégrer à Jenkins.</p><p>Jslint ne permet pas, a priori, nativement de générer un fichier XML compréhensible par Jenkins.</p><p>Je me suis donc tourné vers <a href=http://code.google.com/p/jslint4java/>jslint4java</a>. Je me suis inspiré du travail de <a href=http://stephen.rees-carter.net/2011/05/jenkins-ci-jslint-javascript-quality-checking/>Stephen Rees</a> (qui utilise Ant) pour implémenter l&rsquo;exécution de Jslint avec phing.</p><p>Voici le résultat :</p><pre tabindex=0><code>
    &lt;!-- Fichier temporaire contenant la liste des fichiers JS à traiter avec JSLint --&gt;
    &lt;property name=&#34;temp_file_all_js&#34; value=&#34;/tmp/${phing.project.name}/all_js.txt&#34; override=&#34;true&#34; /&gt;     

    &lt;!-- Chemin vers Jslint4java --&gt;
    &lt;property name=&#34;jslint4java&#34; value=&#34;/chemin/vers/jslint4java/jslint4java-2.0.0.jar&#34; override=&#34;true&#34; /&gt;     

    &lt;!-- création d&#39;un patternset contenant l&#39;ensemble des fichiers JS à analyser --&gt;
    &lt;!-- on exclut les fichiers JQuery et les fichiers minimifiés --&gt;
    &lt;patternset id=&#34;js_files&#34;&gt;
        &lt;include name=&#34;public/js/**/*.js&#34;/&gt;
        &lt;exclude name=&#34;public/js/**/*-min.js&#34;/&gt;
        &lt;exclude name=&#34;public/js/jquery*.js&#34;/&gt;
    &lt;/patternset&gt;

   &lt;!-- ============================================  --&gt;
    &lt;!--   (jslint) Target: vérification syntaxe JS    --&gt;
    &lt;!-- attention à créer au préalable un patternset  --&gt;
    &lt;!-- ayant pour nom js_files                        --&gt;
    &lt;!-- ============================================  --&gt;
    &lt;target name=&#34;jslint&#34;&gt;
        
        &lt;!-- créer le repertoire de stockage du fichier temporaire --&gt;
        &lt;!-- s&#39;il n&#39;existe pas                                     --&gt;
        &lt;php function=&#34;dirname&#34; returnProperty=&#34;temp_dir&#34;&gt;
            &lt;param value=&#34;${temp_file_all_js}&#34;/&gt;
        &lt;/php&gt;
        &lt;mkdir dir=&#34;${temp_dir}&#34; /&gt;
        
        &lt;!-- crée un fichier temporaire contenant la liste des fichiers JS à traiter --&gt;
        &lt;!-- cette liste se base sur le patternset refid=js_files --&gt;
        &lt;foreach param=&#34;filename&#34; absparam=&#34;absfilename&#34; target=&#34;_createFilesetText&#34;&gt;
            &lt;fileset dir=&#34;${install_dir}&#34;&gt;
                &lt;patternset refid=&#34;js_files&#34; /&gt;
            &lt;/fileset&gt;
        &lt;/foreach&gt;
    
        &lt;!-- on charge le contenu de temp_file_all_js dans la variable ${all_js} --&gt;
        &lt;loadfile property=&#34;all_js&#34; file=&#34;${temp_file_all_js}&#34;/&gt;
        &lt;echo&gt;Fichiers analysés par JSLint : ${all_js}&lt;/echo&gt;
        
        &lt;!-- exécution de jslint4java                       --&gt;
        &lt;!-- browser permet de définir les variables du navigateur dans le contexte d&#39;exécution --&gt;
        &lt;!-- prefed permet de définir les variables dans le contexte d&#39;exécution --&gt;
        &lt;!-- voir : http://code.google.com/p/jslint4java/source/browse/jslint4java-docs/src/main/resources/cli.html --&gt;
        &lt;exec 
            command=&#34;java -jar ${jslint4java}
                     --browser --predef $,document,jQuery
                     --report xml
                     ${all_js} &gt; ${builddir}/logs/jslint.xml&#34; 
            passthru=&#34;true&#34; 
        /&gt;
        
        &lt;delete file=&#34;${temp_file_all_js}&#34; /&gt;
    &lt;/target&gt;

   &lt;!-- ============================================  --&gt;
    &lt;!--   _createFilesetText Target:                  --&gt;
    &lt;!-- stocke la liste des fichiers JS à traiter     --&gt;
    &lt;!-- dans le fichier /tmp/all_js.txt               --&gt;
    &lt;!-- ============================================  --&gt;
    &lt;target name=&#34;_createFilesetText&#34; &gt;
        &lt;echo file=&#34;${temp_file_all_js}&#34; append=&#34;true&#34;&gt;${absfilename} &lt;/echo&gt;
    &lt;/target&gt;
</code></pre><p>Vous devez ensuite appeler cette tâche dans votre tâche principale de build. Quelque chose comme ça :</p><pre tabindex=0><code>
&lt;target name=&#34;build&#34;&gt;
        &lt;echo msg=&#34;tâche build&#34; /&gt;
        &lt;phingcall target=&#34;php-doc&#34; /&gt;
        &lt;phingcall target=&#34;pdepend&#34;/&gt;
        &lt;phingcall target=&#34;phpmd&#34;/&gt;
        &lt;phingcall target=&#34;phpcpd&#34;/&gt;
        &lt;phingcall target=&#34;phploc&#34;/&gt;
        &lt;phingcall target=&#34;php-cs&#34; /&gt;
	&lt;phingcall target=&#34;php-cb&#34; /&gt;
	&lt;phingcall target=&#34;phpunit&#34; /&gt;
       &lt;!-- on lance la vérification syntaxique de JS --&gt;
        &lt;phingcall target=&#34;jslint&#34; /&gt;
 &lt;/target&gt;
</code></pre><p>Vous pourrez ensuite configurer dans Jenkins l&rsquo;appel du fichier de log (build/log/jslint.xml) : <a href=https://franek.chicour.net/public/jenkins/jenkins_configuration.png title="Jenkins - Configuration JSlint"><img alt="Jenkins - Configuration JSlint" loading=lazy src=https://franek.chicour.net/public/jenkins/.jenkins_configuration_m.jpg title="Jenkins - Configuration JSlint, oct. 2011"></a></p><p>Après l&rsquo;exécution du build, vous devriez avoir dans le menu Violations, quelque chose comme ça : <a href=https://franek.chicour.net/public/jenkins/jenkins_violation.png title="jenkins - violation JSLint"><img alt="jenkins - violation JSLint" loading=lazy src=https://franek.chicour.net/public/jenkins/.jenkins_violation_m.jpg title="jenkins - violation JSLint, oct. 2011"></a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://franek.chicour.net/tags/d%C3%A9veloppement-web/>Développement Web</a></li><li><a href=https://franek.chicour.net/tags/int%C3%A9gration-continue/>Intégration Continue</a></li><li><a href=https://franek.chicour.net/tags/jenkins/>Jenkins</a></li><li><a href=https://franek.chicour.net/tags/jslint/>Jslint</a></li><li><a href=https://franek.chicour.net/tags/phing/>Phing</a></li><li><a href=https://franek.chicour.net/tags/php/>Php</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://franek.chicour.net/>::franek::</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>