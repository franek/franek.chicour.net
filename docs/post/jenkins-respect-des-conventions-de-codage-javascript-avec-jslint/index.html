<!doctype html><html lang=fr dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Jenkins : Respect des conventions de codage Javascript avec JSLint | ::franek::</title><meta name=keywords content="développement web,intégration continue,jenkins,jslint,phing,php"><meta name=description content="Imaginons que vous disposez d&rsquo;une plate-forme d&rsquo;intégration continue (idéalement Jenkins ou Hudson) pour vos projets PHP (si ce n&rsquo;est pas le cas, je vous invite à lire les excellents billets de Pascal Martin :Intégration continue avec Jenkins : installation et configuration de base et Intégration continue d&rsquo;un projet PHP avec Jenkins).
Imaginons que vous n&rsquo;utilisez pas Ant comme outil d&rsquo;automatisation (de build) mais plutôt Phing parce que vous maîtrisez cet outil."><meta name=author content="franek"><link rel=canonical href=https://franek.chicour.net/post/jenkins-respect-des-conventions-de-codage-javascript-avec-jslint/><meta name=google-site-verification content="XYZabc"><link href=https://franek.chicour.net/assets/css/stylesheet.min.b6e4fb9d9486ee9750cbbe1b4e388ff4332a2d1e0d17ab3592ecb6c6f7ba1157.css integrity="sha256-tuT7nZSG7pdQy74bTjiP9DMqLR4NF6s1kuy2xve6EVc=" rel="preload stylesheet" as=style><link rel=icon href=https://franek.chicour.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://franek.chicour.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://franek.chicour.net/favicon-32x32.png><link rel=apple-touch-icon href=https://franek.chicour.net/apple-touch-icon.png><link rel=mask-icon href=https://franek.chicour.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.74.3"><meta property="og:title" content="Jenkins : Respect des conventions de codage Javascript avec JSLint"><meta property="og:description" content="Imaginons que vous disposez d&rsquo;une plate-forme d&rsquo;intégration continue (idéalement Jenkins ou Hudson) pour vos projets PHP (si ce n&rsquo;est pas le cas, je vous invite à lire les excellents billets de Pascal Martin :Intégration continue avec Jenkins : installation et configuration de base et Intégration continue d&rsquo;un projet PHP avec Jenkins).
Imaginons que vous n&rsquo;utilisez pas Ant comme outil d&rsquo;automatisation (de build) mais plutôt Phing parce que vous maîtrisez cet outil."><meta property="og:type" content="article"><meta property="og:url" content="https://franek.chicour.net/post/jenkins-respect-des-conventions-de-codage-javascript-avec-jslint/"><meta property="og:image" content="https://franek.chicour.net/60"><meta property="article:published_time" content="2011-10-10T13:21:00+02:00"><meta property="article:modified_time" content="2011-10-23T17:00:15+02:00"><meta property="og:site_name" content="::franek::"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://franek.chicour.net/60"><meta name=twitter:title content="Jenkins : Respect des conventions de codage Javascript avec JSLint"><meta name=twitter:description content="Imaginons que vous disposez d&rsquo;une plate-forme d&rsquo;intégration continue (idéalement Jenkins ou Hudson) pour vos projets PHP (si ce n&rsquo;est pas le cas, je vous invite à lire les excellents billets de Pascal Martin :Intégration continue avec Jenkins : installation et configuration de base et Intégration continue d&rsquo;un projet PHP avec Jenkins).
Imaginons que vous n&rsquo;utilisez pas Ant comme outil d&rsquo;automatisation (de build) mais plutôt Phing parce que vous maîtrisez cet outil."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Jenkins : Respect des conventions de codage Javascript avec JSLint","name":"Jenkins : Respect des conventions de codage Javascript avec JSLint","description":"Imaginons que vous disposez d\u0026amp;rsquo;une plate-forme d\u0026amp;rsquo;intégration continue (idéalement Jenkins ou Hudson) pour vos projets PHP (si ce n\u0026amp;rsquo;est pas le cas, je vous invite à …","keywords":["développement web","intégration continue","jenkins","jslint","phing","php"],"articleBody":"Imaginons que vous disposez d’une plate-forme d’intégration continue (idéalement Jenkins ou Hudson) pour vos projets PHP (si ce n’est pas le cas, je vous invite à lire les excellents billets de Pascal Martin :Intégration continue avec Jenkins : installation et configuration de base et Intégration continue d’un projet PHP avec Jenkins).\nImaginons que vous n’utilisez pas Ant comme outil d’automatisation (de build) mais plutôt Phing parce que vous maîtrisez cet outil.\nImaginons que vous souhaitez également vérifier la qualité de vos développement Javascript (Dans un projet PHP, vous avez sûrement un peu de Javascript, non ?) et que vous souhaitez disposer d’indicateur de suivi de la qualité dans Jenkins.\nIl existe plusieurs outils pour vérifier la qualité de son code Javascript :\n Jslint de Douglas Crockford jslint4java un portage de jslint de Douglas Crockford en Java Google Closure Linter un outil développé par Google JsHint un fork de Jslint Javascript Lint dit JSL est un portage de jslint en Python.  L’outil JSL n’a pas évolué depuis 2007. Il nécessite d’être installé en suivant l’une de ces procédures. Avantage, il existe une tâche Phing pour exécuter JSL. Inconvénient, il n’est pas possible de générer un fichier XML compréhensible par Jenkins.\nJe n’ai pas regardé Google Closure Linter.\nJSHint semble intéressant. Mais à nouveau, il ne semble pas y avoir de mécanisme simple permettant de l’intégrer à Jenkins.\nJslint ne permet pas, a priori, nativement de générer un fichier XML compréhensible par Jenkins.\nJe me suis donc tourné vers jslint4java. Je me suis inspiré du travail de Stephen Rees (qui utilise Ant) pour implémenter l’exécution de Jslint avec phing.\nVoici le résultat :\n     Fichiers analysés par JSLint : ${all_js} ${builddir}/logs/jslint.xml\" passthru=\"true\" /  ${absfilename}   Vous devez ensuite appeler cette tâche dans votre tâche principale de build. Quelque chose comme ça :\n  Vous pourrez ensuite configurer dans Jenkins l’appel du fichier de log (build/log/jslint.xml) : \nAprès l’exécution du build, vous devriez avoir dans le menu Violations, quelque chose comme ça : \n","wordCount":"615","inLanguage":"fr","datePublished":"2011-10-10T13:21:00+02:00","dateModified":"2011-10-23T17:00:15+02:00","author":[{"@type":"Person","name":"franek"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://franek.chicour.net/post/jenkins-respect-des-conventions-de-codage-javascript-avec-jslint/"},"publisher":{"@type":"Organization","name":"::franek::","logo":{"@type":"ImageObject","url":"https://franek.chicour.net/favicon.ico"}}}</script></head><body id=top><noscript><style type=text/css>.theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://franek.chicour.net accesskey=h title="::franek:: (Alt + H)"><img src=/public/logo-franek.png alt=logo aria-label=logo height=35>::franek::</a>
<span class=logo-switches></span></div><ul class=menu id=menu onscroll=menu_on_scroll()><li><a href=https://franek.chicour.net/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://franek.chicour.net/archive/ title=Archives><span>Archives</span></a></li><li><a href=https://franek.chicour.net/search/ title="Recherche (Alt + /)" accesskey=/><span>Recherche</span></a></li><li><a href=https://franek.chicour.net/feed/rss2 title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Jenkins : Respect des conventions de codage Javascript avec JSLint</h1><div class=post-meta>October 10, 2011&nbsp;·&nbsp;franek</div></header><div class=post-content><p>Imaginons que vous disposez d&rsquo;une plate-forme d&rsquo;intégration continue (idéalement Jenkins ou Hudson) pour vos projets PHP (si ce n&rsquo;est pas le cas, je vous invite à lire les excellents billets de Pascal Martin :<a href=http://blog.pascal-martin.fr/post/integration-continue-jenkins-installation-configuration> Intégration continue avec Jenkins : installation et configuration de base</a> et <a href=http://blog.pascal-martin.fr/post/integration-continue-jenkins-projet-php>Intégration continue d&rsquo;un projet PHP avec Jenkins</a>).</p><p>Imaginons que vous n&rsquo;utilisez pas Ant comme outil d&rsquo;automatisation (de build) mais plutôt Phing parce que vous maîtrisez cet outil.</p><p>Imaginons que vous souhaitez également vérifier la qualité de vos développement Javascript (Dans un projet PHP, vous avez sûrement un peu de Javascript, non ?) et que vous souhaitez disposer d&rsquo;indicateur de suivi de la qualité dans Jenkins.</p><p>Il existe plusieurs outils pour vérifier la qualité de son code Javascript :</p><ul><li><a href=http://www.jslint.com/>Jslint</a> de Douglas Crockford</li><li><a href=http://code.google.com/p/jslint4java/>jslint4java</a> un portage de jslint de Douglas Crockford en Java</li><li><a href=http://code.google.com/intl/fr/closure/utilities/>Google Closure Linter</a> un outil développé par Google</li><li><a href=http://jshint.org/>JsHint</a> un fork de Jslint</li><li><a href=http://www.javascriptlint.com/>Javascript Lint</a> dit JSL est un portage de jslint en Python.</li></ul><p>L&rsquo;outil JSL n&rsquo;a pas évolué depuis 2007. Il nécessite d&rsquo;être installé en suivant l&rsquo;<a href=http://ioconnor.wordpress.com/2009/05/02/javascriptlint-vim-and-ubuntu/>une de ces procédures</a>. Avantage, il existe une <a href=http://www.phing.info/docs/guide/stable/chapters/appendixes/AppendixC-OptionalTasks.html#JslLintTask>tâche Phing pour exécuter JSL</a>. Inconvénient, il n&rsquo;est pas possible de générer un fichier XML compréhensible par Jenkins.</p><p>Je n&rsquo;ai pas regardé Google Closure Linter.</p><p>JSHint semble intéressant. Mais à nouveau, il ne semble pas y avoir de mécanisme simple permettant de l&rsquo;intégrer à Jenkins.</p><p>Jslint ne permet pas, a priori, nativement de générer un fichier XML compréhensible par Jenkins.</p><p>Je me suis donc tourné vers <a href=http://code.google.com/p/jslint4java/>jslint4java</a>. Je me suis inspiré du travail de <a href=http://stephen.rees-carter.net/2011/05/jenkins-ci-jslint-javascript-quality-checking/>Stephen Rees</a> (qui utilise Ant) pour implémenter l&rsquo;exécution de Jslint avec phing.</p><p>Voici le résultat :</p><pre><code>
    &lt;!-- Fichier temporaire contenant la liste des fichiers JS à traiter avec JSLint --&gt;
    &lt;property name=&quot;temp_file_all_js&quot; value=&quot;/tmp/${phing.project.name}/all_js.txt&quot; override=&quot;true&quot; /&gt;     

    &lt;!-- Chemin vers Jslint4java --&gt;
    &lt;property name=&quot;jslint4java&quot; value=&quot;/chemin/vers/jslint4java/jslint4java-2.0.0.jar&quot; override=&quot;true&quot; /&gt;     

    &lt;!-- création d'un patternset contenant l'ensemble des fichiers JS à analyser --&gt;
    &lt;!-- on exclut les fichiers JQuery et les fichiers minimifiés --&gt;
    &lt;patternset id=&quot;js_files&quot;&gt;
        &lt;include name=&quot;public/js/**/*.js&quot;/&gt;
        &lt;exclude name=&quot;public/js/**/*-min.js&quot;/&gt;
        &lt;exclude name=&quot;public/js/jquery*.js&quot;/&gt;
    &lt;/patternset&gt;

   &lt;!-- ============================================  --&gt;
    &lt;!--   (jslint) Target: vérification syntaxe JS    --&gt;
    &lt;!-- attention à créer au préalable un patternset  --&gt;
    &lt;!-- ayant pour nom js_files                        --&gt;
    &lt;!-- ============================================  --&gt;
    &lt;target name=&quot;jslint&quot;&gt;
        
        &lt;!-- créer le repertoire de stockage du fichier temporaire --&gt;
        &lt;!-- s'il n'existe pas                                     --&gt;
        &lt;php function=&quot;dirname&quot; returnProperty=&quot;temp_dir&quot;&gt;
            &lt;param value=&quot;${temp_file_all_js}&quot;/&gt;
        &lt;/php&gt;
        &lt;mkdir dir=&quot;${temp_dir}&quot; /&gt;
        
        &lt;!-- crée un fichier temporaire contenant la liste des fichiers JS à traiter --&gt;
        &lt;!-- cette liste se base sur le patternset refid=js_files --&gt;
        &lt;foreach param=&quot;filename&quot; absparam=&quot;absfilename&quot; target=&quot;_createFilesetText&quot;&gt;
            &lt;fileset dir=&quot;${install_dir}&quot;&gt;
                &lt;patternset refid=&quot;js_files&quot; /&gt;
            &lt;/fileset&gt;
        &lt;/foreach&gt;
    
        &lt;!-- on charge le contenu de temp_file_all_js dans la variable ${all_js} --&gt;
        &lt;loadfile property=&quot;all_js&quot; file=&quot;${temp_file_all_js}&quot;/&gt;
        &lt;echo&gt;Fichiers analysés par JSLint : ${all_js}&lt;/echo&gt;
        
        &lt;!-- exécution de jslint4java                       --&gt;
        &lt;!-- browser permet de définir les variables du navigateur dans le contexte d'exécution --&gt;
        &lt;!-- prefed permet de définir les variables dans le contexte d'exécution --&gt;
        &lt;!-- voir : http://code.google.com/p/jslint4java/source/browse/jslint4java-docs/src/main/resources/cli.html --&gt;
        &lt;exec 
            command=&quot;java -jar ${jslint4java}
                     --browser --predef $,document,jQuery
                     --report xml
                     ${all_js} &gt; ${builddir}/logs/jslint.xml&quot; 
            passthru=&quot;true&quot; 
        /&gt;
        
        &lt;delete file=&quot;${temp_file_all_js}&quot; /&gt;
    &lt;/target&gt;

   &lt;!-- ============================================  --&gt;
    &lt;!--   _createFilesetText Target:                  --&gt;
    &lt;!-- stocke la liste des fichiers JS à traiter     --&gt;
    &lt;!-- dans le fichier /tmp/all_js.txt               --&gt;
    &lt;!-- ============================================  --&gt;
    &lt;target name=&quot;_createFilesetText&quot; &gt;
        &lt;echo file=&quot;${temp_file_all_js}&quot; append=&quot;true&quot;&gt;${absfilename} &lt;/echo&gt;
    &lt;/target&gt;

</code></pre><p>Vous devez ensuite appeler cette tâche dans votre tâche principale de build. Quelque chose comme ça :</p><pre><code>
&lt;target name=&quot;build&quot;&gt;
        &lt;echo msg=&quot;tâche build&quot; /&gt;
        &lt;phingcall target=&quot;php-doc&quot; /&gt;
        &lt;phingcall target=&quot;pdepend&quot;/&gt;
        &lt;phingcall target=&quot;phpmd&quot;/&gt;
        &lt;phingcall target=&quot;phpcpd&quot;/&gt;
        &lt;phingcall target=&quot;phploc&quot;/&gt;
        &lt;phingcall target=&quot;php-cs&quot; /&gt;
	&lt;phingcall target=&quot;php-cb&quot; /&gt;
	&lt;phingcall target=&quot;phpunit&quot; /&gt;
       &lt;!-- on lance la vérification syntaxique de JS --&gt;
        &lt;phingcall target=&quot;jslint&quot; /&gt;
 &lt;/target&gt;
</code></pre><p>Vous pourrez ensuite configurer dans Jenkins l&rsquo;appel du fichier de log (build/log/jslint.xml) : <a href=https://franek.chicour.net/public/jenkins/jenkins_configuration.png title="Jenkins - Configuration JSlint"><img src=https://franek.chicour.net/public/jenkins/.jenkins_configuration_m.jpg alt="Jenkins - Configuration JSlint" title="Jenkins - Configuration JSlint, oct. 2011"></a></p><p>Après l&rsquo;exécution du build, vous devriez avoir dans le menu Violations, quelque chose comme ça : <a href=https://franek.chicour.net/public/jenkins/jenkins_violation.png title="jenkins - violation JSLint"><img src=https://franek.chicour.net/public/jenkins/.jenkins_violation_m.jpg alt="jenkins - violation JSLint" title="jenkins - violation JSLint, oct. 2011"></a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://franek.chicour.net/tags/d%C3%A9veloppement-web/>développement web</a></li><li><a href=https://franek.chicour.net/tags/int%C3%A9gration-continue/>intégration continue</a></li><li><a href=https://franek.chicour.net/tags/jenkins/>jenkins</a></li><li><a href=https://franek.chicour.net/tags/jslint/>jslint</a></li><li><a href=https://franek.chicour.net/tags/phing/>phing</a></li><li><a href=https://franek.chicour.net/tags/php/>php</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://franek.chicour.net>::franek::</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=https://franek.chicour.net/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});if(id==="top"){history.replaceState(null,null," ");}else{history.replaceState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script></body></html>